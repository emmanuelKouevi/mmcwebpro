{"remainingRequest":"/home/kouevi/mmc_web_pro/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/kouevi/mmc_web_pro/src/components/espace_promoteur/CreerModifierProgrammeImmobilier.vue?vue&type=style&index=0&id=f014136e&scoped=true&lang=css&","dependencies":[{"path":"/home/kouevi/mmc_web_pro/src/components/espace_promoteur/CreerModifierProgrammeImmobilier.vue","mtime":1666362666429},{"path":"/home/kouevi/mmc_web_pro/node_modules/css-loader/dist/cjs.js","mtime":1663945505546},{"path":"/home/kouevi/mmc_web_pro/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1663945506522},{"path":"/home/kouevi/mmc_web_pro/node_modules/postcss-loader/src/index.js","mtime":1663945505794},{"path":"/home/kouevi/mmc_web_pro/node_modules/cache-loader/dist/cjs.js","mtime":1663945505146},{"path":"/home/kouevi/mmc_web_pro/node_modules/vue-loader/lib/index.js","mtime":1663945506422}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgouY3JlYXRlX29yX21vZGlmeV90aXRsZXsKICAgIGNvbG9yOiAjMzg2N2Q2OwogICAgZm9udC13ZWlnaHQ6IGJvbGQ7Cn0KCi5zZWN0aW9uewogICAgZm9udC13ZWlnaHQ6IGJvbGQ7Cn0KCi5teS1hbGVydC1zdWNjZXNzIHsKICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgIHRvcDogMjVweDsKICAgIHJpZ2h0OjIlOwogICAgd2lkdGg6IDMwJTsKICAgIGRpc3BsYXk6IG5vbmU7Cn0KCi5teS1hbGVydC1lcnJvciB7CiAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICB0b3A6IDI1cHg7CiAgICByaWdodDoyJTsKICAgIHdpZHRoOiAzMCU7CiAgICBkaXNwbGF5OiBub25lOwp9Cgo="},{"version":3,"sources":["CreerModifierProgrammeImmobilier.vue"],"names":[],"mappings":";;AAy8BA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreerModifierProgrammeImmobilier.vue","sourceRoot":"src/components/espace_promoteur","sourcesContent":["<template>\n\n    <div>\n\n        <v-form>\n\n            <v-card elevation=\"5\">\n\n                <v-card-title v-if=\"isCreation\"><span class=\"create_or_modify_title\">CREER UN PROGRAMME IMMOBILIER</span> </v-card-title>\n\n                <v-card-title v-else><span class=\"create_or_modify_title\">MODIFIER UN PROGRAMME IMMOBILIER</span> </v-card-title>\n\n                <v-card>\n\n                    <v-row>\n\n                        <v-card-subtitle>\n                            <v-icon>mdi-chevron-right</v-icon><span class=\"section\">INFORMATION(S) GÉNÉRALE(S)</span> \n                        </v-card-subtitle>\n\n                    </v-row>\n\n\n                    <v-container>\n\n                        <v-row>\n\n                            <v-col cols=\"6\">\n                                <v-text-field color=\"teal\"  :counter=\"250\" \n                                    label=\"Designation\" :error-messages=\"designationErrors\" \n                                    v-model.trim=\"$v.programmeImmobilierModel.programmeImmobilier.designation.$model\" required @input=\"$v.programmeImmobilierModel.programmeImmobilier.designation.$touch()\"\n                                    @blur=\"$v.programmeImmobilierModel.programmeImmobilier.designation.$touch()\">\n                                </v-text-field>\n\n                            </v-col>\n    \n                            <v-col cols=\"6\">\n                                <v-text-field color=\"teal\" :counter=\"250\" \n                                    label=\"Code\" :error-messages=\"codeErrors\" \n                                    v-model.trim=\"$v.programmeImmobilierModel.programmeImmobilier.code.$model\" required @input=\"$v.programmeImmobilierModel.programmeImmobilier.code.$touch()\"\n                                    @blur=\"$v.programmeImmobilierModel.programmeImmobilier.code.$touch()\">\n                                </v-text-field>\n                            </v-col>\n    \n                            <v-col cols=\"12\">\n\n                                <v-textarea  color=\"teal\" :error-messages=\"descriptionErrors\"\n                                    v-model.trim=\"$v.programmeImmobilierModel.programmeImmobilier.description.$model\" required @input=\"$v.programmeImmobilierModel.programmeImmobilier.description.$touch()\"\n                                    @blur=\"$v.programmeImmobilierModel.programmeImmobilier.description.$touch()\">\n                                    <template v-slot:label><div>Description</div></template>\n                                </v-textarea>\n\n                            </v-col>\n\n                            <v-col cols=\"6\">\n                                <v-select color=\"teal\" label=\"Localisation\" required\n                                    :error-messages=\"localisationErrors\"\n                                    v-model.trim=\"$v.programmeImmobilierModel.programmeImmobilier.ville.id.$model\" \n                                    :items=\"villesList\"\n                                    item-text=\"designation\"\n                                    item-value=\"id\"\n                                    @change=\"$v.programmeImmobilierModel.programmeImmobilier.ville.id.$touch()\"\n                                    @blur=\"$v.programmeImmobilierModel.programmeImmobilier.ville.id.$touch()\">\n                                </v-select>\n                            </v-col>\n\n                        </v-row>\n\n                    </v-container>\n\n                </v-card>\n\n            \n                <v-card elevation=\"3\">\n\n                    <v-row>\n\n                        <v-card-subtitle>\n                            <v-icon>mdi-chevron-right</v-icon><span class=\"section\">MODE DE FINANCEMENTS</span> \n                        </v-card-subtitle>\n\n                    </v-row>\n\n                    <v-row justify=\"center\">\n\n                        <v-btn color=\"primary\" class=\"ma-2\" dark  @click=\"modeFinancementDialog = true\"><v-icon>mdi-plus</v-icon>Ajouter un mode de financements</v-btn>\n\n                        <v-dialog v-model=\"modeFinancementDialog\" fullscreen hide-overlay transition=\"dialog-bottom-transition\" scrollable>\n\n                            <v-card tile>\n\n                                <v-toolbar max-height=\"70\" dark color=\"primary\">\n\n                                    <v-btn icon dark @click=\"modeFinancementDialog = false\"><v-icon>mdi-close</v-icon></v-btn>\n\n                                    <v-toolbar-title>Mode de financements</v-toolbar-title>\n\n                                    <v-spacer></v-spacer>\n\n                                    <v-toolbar-items>\n                                        <v-btn dark text @click=\"dialog = false\">Valider</v-btn>\n                                    </v-toolbar-items>\n\n                                </v-toolbar>\n\n                                <v-card-text>\n\n                                    <v-btn color=\"primary\" dark class=\"ma-2\" @click=\"typeFinancementDialog = !typeFinancementDialog\">Choix du type de financements</v-btn>\n\n                                    <v-list three-line subheader>\n\n                                        <v-form>\n                                            \n                                            <v-container>\n\n                                                <v-row>\n\n                                                    <v-col>\n\n                                                        <v-text-field color=\"teal\"\n                                                            v-model.trim=\"$v.modeFinancementModel.designation.$model\"\n                                                            data-cy=\"designationModeFinancement\"\n                                                            label=\"Designation du mode de financement\" required>\n                                                        </v-text-field>\n\n                                                    </v-col>\n\n                                                    <v-col>\n\n                                                        <v-text-field color=\"teal\"\n                                                            v-model.trim=\"$v.modeFinancementModel.description.$model\"\n                                                            data-cy=\"descriptionModeFinancement\"\n                                                            label=\"Description du mode de financement\" required>\n                                                        </v-text-field>\n\n                                                    </v-col>\n\n                                                </v-row>\n\n\n                                                <v-row v-if=\"modeFinancementModel.typeFinancement.id == 'ref.element.valeur.creditbancaire'\">\n\n                                                    <v-col>\n                                                        <v-select color=\"teal\" label=\"EFI\" required\n                                                            :error-messages=\"efiErrors\"\n                                                            v-model.trim=\"$v.modeFinancementModel.creditBancaire.efi.id.$model\" \n                                                            :items=\"efisList\"\n                                                            item-text=\"designation\"\n                                                            item-value=\"id\"\n                                                            @change=\"$v.modeFinancementModel.creditBancaire.efi.id.$touch()\"\n                                                            @blur=\"$v.modeFinancementModel.creditBancaire.efi.id.$touch()\">\n                                                        </v-select>\n                                                    </v-col>\n\n                                                    <v-col cols=\"2\">\n\n                                                        <v-text-field color=\"teal\"\n                                                            v-model.trim=\"$v.modeFinancementModel.creditBancaire.taux.$model\"\n                                                            data-cy=\"designationModeFinancement\" suffix=\"%\"\n                                                            label=\"Taux\" required>\n                                                        </v-text-field>\n\n                                                    </v-col>\n\n                                                    <v-col cols=\"2\">\n\n                                                        <v-text-field color=\"teal\"\n                                                            v-model.trim=\"$v.modeFinancementModel.creditBancaire.duree.$model\"\n                                                            data-cy=\"designationModeFinancement\" suffix=\"Ans\"\n                                                            :counter=\"10\" label=\"Durée\" required>\n                                                        </v-text-field>\n\n                                                    </v-col>\n\n                                                </v-row>\n\n\n                                                <v-row v-if=\"modeFinancementModel.typeFinancement.id == 'ref.element.valeur.temperament'\">\n\n                                                    <v-col cols=\"3\">\n                                                        <v-text-field color=\"teal\"\n                                                            v-model.trim=\"$v.modeFinancementModel.temperament.apportPersonnel.$model\"\n                                                            data-cy=\"apportPersonnel\" suffix=\"%\"\n                                                            label=\"Apport Personnel\" required>\n                                                        </v-text-field>\n                                                    </v-col>\n\n                                                    <v-col cols=\"3\">\n                                                        <v-select color=\"teal\" label=\"Périodicité\" required\n                                                            :error-messages=\"periodiciteErrors\"\n                                                            v-model.trim=\"$v.modeFinancementModel.temperament.periodicite.id.$model\" \n                                                            :items=\"periodicitesList\"\n                                                            item-text=\"designation\"\n                                                            item-value=\"id\"\n                                                            @change=\"$v.modeFinancementModel.temperament.periodicite.id.$touch()\"\n                                                            @blur=\"$v.modeFinancementModel.temperament.periodicite.id.$touch()\">\n                                                        </v-select>\n                                                    </v-col>\n\n                                                    <v-col cols=\"3\">\n                                                        <v-text-field color=\"teal\"\n                                                            v-model.trim=\"$v.modeFinancementModel.temperament.nombrePeriodeMaxi.$model\"\n                                                            data-cy=\"taux\"\n                                                            label=\"Nombre de periode\" required>\n                                                        </v-text-field>\n                                                    </v-col>\n\n                                                    <v-col cols=\"3\">\n                                                        <v-text-field type=\"date\" color=\"teal\"\n                                                            v-model.trim=\"$v.modeFinancementModel.temperament.dateDebut.$model\"\n                                                            data-cy=\"\"\n                                                            label=\"Date de debut\" required>\n                                                        </v-text-field>\n                                                    </v-col>\n\n                                                    <v-col cols=\"3\">\n                                                        <v-text-field color=\"teal\"\n                                                            v-model.trim=\"$v.modeFinancementModel.temperament.delaiRelance.$model\"\n                                                            data-cy=\"duree\"\n                                                            :counter=\"10\" label=\"Delai relance\" required>\n                                                        </v-text-field>\n                                                    </v-col>\n\n                                                </v-row>\n\n\n\n                                                <v-row v-if=\"modeFinancementModel.typeFinancement.id == 'ref.element.valeur.comptantsursituation'\">\n\n                                                    <v-col cols=\"4\">\n                                                        <v-select color=\"teal\" label=\"Pallier\" required\n                                                            :error-messages=\"pallierErrors\"\n                                                            v-model.trim=\"$v.pallierSurSituationModel.pallier.id.$model\" \n                                                            :items=\"pallierSurSituationList\"\n                                                            item-text=\"designation\"\n                                                            item-value=\"id\"\n                                                            @change=\"$v.pallierSurSituationModel.pallier.id.$touch()\"\n                                                            @blur=\"$v.pallierSurSituationModel.pallier.id.$touch()\">\n                                                        </v-select>\n                                                    </v-col>\n\n                                                    <v-col cols=\"4\">\n                                                        <v-text-field color=\"teal\" :error-messages=\"tauxPallierErrors\"\n                                                            v-model.trim=\"$v.pallierSurSituationModel.taux.$model\"\n                                                            data-cy=\"taux\" suffix=\"%\"\n                                                            label=\"taux\" required>\n                                                        </v-text-field>\n                                                    </v-col>\n\n                                                    <v-col cols=\"4\">\n                                                        <v-btn color=\"primary\" @click=\"addPallier(pallierSurSituationModel)\"><v-icon>mdi-plus</v-icon> AJOUTER UN PALLIER</v-btn>\n                                                    </v-col>\n\n\n                                                    <v-row v-for=\"(pallier , p) in modeFinancementModel.pallierComptantSurSituationList\" :key=\"p\">\n\n                                                        <div v-for=\"unPallier in pallierSurSituationList\" :key=\"unPallier.id\">\n\n                                                            <v-container>\n\n                                                                <v-row>\n\n         \n                                                                </v-row>\n                                                        \n                                                            </v-container>\n\n                                                        </div>\n\n                                                    </v-row>\n\n                                                    \n\n                                                    \n\n                                                </v-row>\n\n                                            </v-container>\n                                            \n                                        </v-form>                                        \n\n\n                                        <div>\n                                            <v-alert :hidden=\"true\"  class=\"my-alert-success\" dismissible type=\"success\">{{ successMsg }}</v-alert>\n                                            <v-alert :hidden=\"true\"  class=\"my-alert-error\" dismissible type=\"error\">{{ errorMsg }}</v-alert>\n                                        </div>\n\n                                    </v-list>\n\n                                    <v-divider></v-divider>\n\n                                </v-card-text>\n    \n                                <div style=\"flex: 1 1 auto;\"></div>\n\n                            </v-card>\n\n                        </v-dialog>\n\n    \n                        <v-dialog v-model=\"typeFinancementDialog\" max-width=\"500px\">\n\n                            <v-card>\n\n                                <v-card-title>Type de financements</v-card-title>\n\n                                <v-card-text>\n\n                                    <v-select label=\"Liste des types de financements\" \n                                        :items=\"typeFinancementList\" item-text=\"designation\" \n                                        item-value=\"id\" v-model=\"modeFinancementModel.typeFinancement.id\">\n                                    </v-select>\n\n                                </v-card-text>\n\n                                <v-card-actions>\n\n                                    <v-btn color=\"primary\" text @click=\"typeFinancementDialog = false\">Close</v-btn>\n\n                                </v-card-actions>\n\n                            </v-card>\n\n                        </v-dialog>\n\n                    </v-row>\n\n\n                </v-card>\n\n                <p></p>\n\n                <v-card elevation=\"3\">\n\n                    <v-row>\n                        <v-card-subtitle><v-icon>mdi-chevron-right</v-icon><span class=\"section\">MEDIAS</span> </v-card-subtitle>\n                    </v-row>\n\n                </v-card>\n\n\n            </v-card>\n\n        </v-form>\n \n    </div>\n\n</template>\n\n<script>\n\nimport axios from \"axios\";\nimport $ from 'jquery'\nimport { required, minLength, maxLength } from \"vuelidate/lib/validators\";\nimport {  API_OBTENIR_CONTENU_DOCUMENT_PROGRAMME_IMMOBILIER, API_OBTENIR_LISTE_VILLES ,} from '../globalConfig/globalConfig';\nimport { API_OBTENIR_TYPE_FINANCEMENT , API_OBTENIR_METADATAS_DOCUMENT_PROGRAMME_IMMOBILIER,  } from '../globalConfig/globalConfig'\nimport { API_OBTENIR_LISTE_EFIS , API_OBTENIR_MODE_FINANCEMENT_PAR_PROGRAMME_IMMOBILIER} from \"../globalConfig/globalConfig\";\nimport { API_REFERENCES_PAR_FAMILLE} from \"../globalConfig/globalConfig\";\n\n\nexport default {\n\n    name: 'CreerModifierProgrammeImmobilier',\n\n    data(){\n\n        return{\n            errorMsg : null ,\n            successMsg : null , \n            alertSuccess : true , \n            villesList: [],\n            typeFinancementList:[],\n            efisList : [],\n            periodicitesList : [],\n            periodiciteList : [] , \n            tiersCollecteursList : [], \n            pallierSurSituationList : [],\n\n            programmeImmobilierModel: {\n                programmeImmobilier : {\n                    id: null,\n                    designation: null,\n                    description: null,\n                    code: null,\n                    promoteur : {\n                        id: \"promoteur01\", \n                        identifiantLegal : \"siwise\" ,\n                    },\n                    ville: {\n                        id: null,\n                        version: null,\n                    },\n                    estValide : null ,\n                },\n                videosList : [],\n                modeFinancementList: [],\n            },\n\n\n            modeFinancementModel : {\n                id : null ,\n                designation : null ,\n                description : null ,\n                estValide : null , \n\n                compteSequestre : {\n                    id : null ,\n                    designation : null , \n                    description : null ,\n                    version : null\n                },\n\n                creditBancaire : {                   \n                    id : null ,\n                    duree : null , \n                    taux : null ,\n\n                    efi : {\n                        id : null , \n                        designation : null , \n                        description : null,\n                        email : null\n                    },\n\n                    lettreConfort: {\n                        id: null,\n                        designation: null,\n                        description: null,\n                        contenu: null,\n                        format: {\n                            id: null,\n                            version: null,\n                        },\n                        typeDocument:{\n                            id: \"ref.element.typeValeur.lettreConfort\"\n                        },\n                        version : null\n                    }\n                },\n\n                pallierComptantSurSituationList :[],\n\n                tierscollecteur : {\n                    id : null , \n                    tiers : {\n                        id : null , \n                        designation : null , \n                        description : null , \n                        email : null \n                    }\n                }, \n\n                temperament : {\n                    id : null , \n                    apportPersonnel : null , \n                    periodicite : {\n                        id : null ,\n                        designation : null ,\n                        description : null\n                    }, \n                    nombrePeriodeMaxi : null , \n                    dateDebut : null , \n                    delaiRelance : null \n\n                },\n\n                typeFinancement : {\n                    id : null , \n                    designation: null , \n                    description : null , \n                    estvalideParEfi : null , \n                    code : null , \n                    version : null ,\n                }\n            },\n\n            pallierSurSituationModel : {\n                id : null , \n                pallier : {\n                    id : null , \n                    designation :  null ,\n                    description : null,\n                },\n                taux : null ,\n            },\n\n            modeFinancementDialog: false,\n            typeFinancementDialog: false,\n\n        }\n\n    },\n\n    validations : {\n\n        // GESTION DES CONTRAINTES DES CHAMPS DE PROGRAMME IMMOBILIER\n\n        programmeImmobilierModel: {\n            programmeImmobilier :{\n                designation: {\n                    required,\n                    minLength: minLength(8),\n                    maxLength: maxLength(70),\n                },\n      \n\n                description: {\n                    required,\n                    minLength: minLength(20),\n                    maxLength: maxLength(600),\n                },\n\n                code: {\n                    required,\n                    minLength: minLength(4),\n                    maxLength: maxLength(20),\n                },\n\n                ville:{\n                    id:{\n                        required\n                    },\n                }\n\n            }\n\n        },\n\n        //GESTION DES CONTRAINTES PORTANT SUR LE MODE DE FINANCEMENTS\n\n        modeFinancementModel : {\n\n            designation : {\n                required ,\n                minLength: minLength(4),\n            }, \n\n            description : {\n                required ,\n                minLength: minLength(4), \n            },\n\n            creditBancaire : {\n                duree : {\n                    required,\n                } ,\n                taux : {\n                    required\n                },\n\n                efi : {\n                    id : {\n                        required\n                    },\n                },\n            }, \n\n            temperament : {\n                apportPersonnel : {\n                    required\n                },\n                periodicite : {\n                    id:{\n                        required\n                    }\n                },\n                nombrePeriodeMaxi : {\n                    required\n                },\n                dateDebut : {\n                    required\n                },\n                delaiRelance : {\n                    required\n                },\n            },\n\n            tierscollecteur : {\n                tiers : {\n                    required\n                }\n            },\n\n            typeFinancement : {\n                id : {\n                    required\n                }\n            },\n\n        },\n\n        pallierSurSituationModel : { \n            pallier : {\n                id : {\n                    required\n                }\n            },\n\n            taux :{\n                required\n            }\n        }\n\n    },\n\n    methods : {\n\n        // AJOUT D'UN PALLIER\n\n        addPallier(pallier){\n\n            var unPallier = {\n                id : null , \n                pallier : {\n                    id : null , \n                    designation :  null ,\n                    description : null,\n                },\n                taux : null ,\n            };\n    \n            var isDuplicated = false\n\n            if(this.modeFinancementModel.pallierComptantSurSituationList.length > 0){\n\n                for (var i = 0; i < this.modeFinancementModel.pallierComptantSurSituationList.length; i++) {\n                    if(this.modeFinancementModel.pallierComptantSurSituationList[i].pallier.id == pallier.pallier.id){ \n                        isDuplicated = true\n                    }\n                }\n            }\n\n            if (isDuplicated) {\n                this.errorMsg = \"Le pallier existe déja\"\n                $(\".my-alert-error\").fadeIn()\n                setTimeout(function(){\n                  $(\".my-alert-error\").fadeOut(); \n                }, 4000)\n            }\n\n            else if(this.$v.pallierSurSituationModel.$invalid){\n\n                this.errorMsg = \"Toutes les informations sont requises\"\n                $(\".my-alert-error\").fadeIn()\n                setTimeout(function(){\n                  $(\".my-alert-error\").fadeOut(); \n                }, 4000)\n            }\n      \n            else {\n\n                unPallier.id = pallier.id\n                unPallier.pallier.id = pallier.pallier.id\n                unPallier.pallier.designation = pallier.pallier.designation\n                unPallier.pallier.description = pallier.pallier.description\n                unPallier.taux = pallier.taux\n                this.modeFinancementModel.pallierComptantSurSituationList.push(unPallier)\n            }\n        },\n\n        //MODE MODIFICATION D'UN PROGRAMME IMMOBILIER\n\n        modeModificationProgrammeImmobilier(){\n\n            if (localStorage.getItem(\"programmeImmobilier\")) {\n\n                try {\n\n                    const programmeImmobilierSelected = JSON.parse(localStorage.getItem(\"programmeImmobilier\"));\n                    this.programmeImmobilierModel.programmeImmobilier.id = programmeImmobilierSelected.id;\n                    this.programmeImmobilierModel.programmeImmobilier.designation = programmeImmobilierSelected.designation;\n                    this.programmeImmobilierModel.programmeImmobilier.description = programmeImmobilierSelected.description;\n                    this.programmeImmobilierModel.programmeImmobilier.code = programmeImmobilierSelected.code;\n                    this.programmeImmobilierModel.programmeImmobilier.ville = programmeImmobilierSelected.ville;\n                    this.programmeImmobilierModel.programmeImmobilier.version = programmeImmobilierSelected.version;\n\n    \n                    axios.get(API_OBTENIR_MODE_FINANCEMENT_PAR_PROGRAMME_IMMOBILIER(programmeImmobilierSelected.id))\n                    .then((response) => {\n                        for (let i = 0; i < response.data.data.length; i++) {\n                            this.programmeImmobilierModel.modeFinancementList.push(response.data.data[i])\n                        }\n                    }).catch((e) => {\n                        this.errorMsg = e\n                        $(\".myAlert-bottom\").fadeIn();\n                        setTimeout(function(){\n                            $(\".myAlert-bottom\").fadeOut(); \n                        }, 4000)\n                    });\n                    axios.get(API_OBTENIR_METADATAS_DOCUMENT_PROGRAMME_IMMOBILIER(programmeImmobilierSelected.id , \"ref.element.typeValeur.video\"))\n                    .then((response)  => {\n\n                        this.programmeImmobilierModel.videosList = response.data.data\n\n                        for (let i = 0; i < response.data.data.length; i++) {\n\n                            var video = {\n                                id : null , \n                                designation : null , \n                                description : null , \n                                contenu : null \n                            };\n\n                            video.id = response.data.data[i].id\n                            video.designation = response.data.data[i].designation\n                            video.description = response.data.data[i].description\n                            video.contenu = response.data.data[i].contenu\n                            this.previewStateVideosList.push(video)\n\n                        }\n\n                        for (let i = 0; i < this.programmeImmobilierModel.videosList.length; i++) {        \n\n                            axios.get(API_OBTENIR_CONTENU_DOCUMENT_PROGRAMME_IMMOBILIER(this.programmeImmobilierModel.videosList[i].id))\n\n                            .then((result) => {\n                                this.programmeImmobilierModel.videosList[i].contenu = result.data.data\n                                this.previewVideosList.push(result.data.data)\n                            }).catch((e) => {\n\n                                this.errorMsg = e\n                                $(\".myAlert-bottom\").fadeIn();\n                                setTimeout(function(){\n                                    $(\".myAlert-bottom\").fadeOut(); \n                                }, 4000)\n\n                            })\n\n                        }\n\n                        for (let i = 0; i < this.previewStateVideosList.length; i++) {\n                        \n                            axios.get(API_OBTENIR_CONTENU_DOCUMENT_PROGRAMME_IMMOBILIER(this.previewStateVideosList[i].id))\n                            .then((result) => {\n                                this.previewStateVideosList[i].contenu = result.data.data\n                            }).catch((e) => {\n                                this.errorMsg = e\n                                $(\".myAlert-bottom\").fadeIn();\n                                setTimeout(function(){\n                                    $(\".myAlert-bottom\").fadeOut(); \n                                }, 4000)\n                            })    \n                        }\n\n                    }).catch((e) => {\n\n                        this.errorMsg = e\n                        $(\".myAlert-bottom\").fadeIn();\n                        setTimeout(function(){\n                            $(\".myAlert-bottom\").fadeOut(); \n                        }, 4000)\n\n                    })\n\n                    localStorage.removeItem(\"programmeImmobilier\");\n\n                }catch (e) {\n                    localStorage.removeItem(\"programmeImmobilier\");\n                }\n            }\n        },\n\n\n        //OBTENIR LA LISTE DES PERIODICITÉS\n\n        async obtenirListeDesPeriodicitesAPI() {\n\n            await axios.get(API_REFERENCES_PAR_FAMILLE(\"ref.famille.typePeriodicite\"))\n            .then((response) => {\n                this.periodicitesList = response.data.data;\n            }).catch((e) => {\n                this.errorMsg = e\n                $(\".myAlert-bottom\").fadeIn();\n                setTimeout(function(){\n                    $(\".myAlert-bottom\").fadeOut(); \n                }, 4000)\n\n            });\n        \n        },\n\n        // OBTENIR LA LISTE DES TYPES DE FINANCEMENTS\n\n        async obtenirListeTypeFinancementAPI() {\n\n            await axios.get(API_OBTENIR_TYPE_FINANCEMENT)\n            .then((response) => {\n                this.typeFinancementList = response.data.data;\n            }).catch((e) => {\n\n                this.errorMsg = e\n                $(\".myAlert-bottom\").fadeIn();\n                setTimeout(function(){\n                    $(\".myAlert-bottom\").fadeOut(); \n                }, 4000)\n\n            });\n\n        },\n\n        \n        //OBTENIR LA LISTE DES ETABLISSEMENTS FINANCEMENTS (EFI) DEPUIS LE MIDDLEWARE\n\n        async obtenirListeDesEfisAPI() {\n            await axios.get(API_OBTENIR_LISTE_EFIS)\n            .then((response) => {\n                this.efisList = response.data.data;\n            }).catch((e) => {\n                this.errorMsg = e\n                $(\".myAlert-bottom\").fadeIn();\n                setTimeout(function(){\n                    $(\".myAlert-bottom\").fadeOut(); \n                }, 4000)\n            });\n        },\n\n\n\n        //OBTENIR LA LISTE DES PALLIERS COMPTANTS SUR SITUATION\n\n        async obtenirListDesPalliersAPI() {\n\n            await axios.get(API_REFERENCES_PAR_FAMILLE(\"ref.famille.pallier\"))\n            .then((response) => {\n                this.pallierSurSituationList = response.data.data;\n            }).catch((e) => {\n                this.errorMsg = e\n                $(\".myAlert-bottom\").fadeIn();\n                setTimeout(function(){\n                    $(\".myAlert-bottom\").fadeOut(); \n                }, 4000)\n            });\n        \n        },\n        \n\n        // RECUPERER LA LISTE DES VILLES DEPUIS LE MIDDLEWARE\n\n        async obtenirListeVillesAPI() {\n            await axios.get(API_OBTENIR_LISTE_VILLES).then((response) => {\n                this.villesList = response.data.data;\n            }).catch((e) => {\n                this.errorMsg = e\n                $(\".myAlert-bottom\").fadeIn();\n                setTimeout(function(){\n                    $(\".myAlert-bottom\").fadeOut(); \n                }, 4000)\n            });\n        },\n\n    },\n\n    computed : {\n\n        //MODE CREATION OU MODIFICATION D'UN PROGRAMME IMMOBILIER\n\n        isCreation() {\n            return this.programmeImmobilierModel.programmeImmobilier.id == null;\n        },\n\n\n        // GESTIONS DES CONTRAINTES DES CHAMPS D'ENTREES (DESIGANTION , DESCRIPTION , CODE , VILLE) DU PROGRAMME IMMOBILIER\n\n        designationErrors(){\n            const errors = [];\n            if (!this.$v.programmeImmobilierModel.programmeImmobilier.designation.$dirty) return errors\n            !this.$v.programmeImmobilierModel.programmeImmobilier.designation.maxLength && errors.push('La designation ne doit pas dépasser 600 caractères')\n            !this.$v.programmeImmobilierModel.programmeImmobilier.designation.required && errors.push('La désignation est obligatoire.')\n            !this.$v.programmeImmobilierModel.programmeImmobilier.designation.required && errors.push('La désignation doit avoir au minimum 8 caractères.')\n            return errors\n        },\n\n        descriptionErrors(){\n            const errors = [];\n            if (!this.$v.programmeImmobilierModel.programmeImmobilier.description.$dirty) return errors\n            !this.$v.programmeImmobilierModel.programmeImmobilier.description.maxLength && errors.push('La description ne doit pas dépasser 600 caractères')\n            !this.$v.programmeImmobilierModel.programmeImmobilier.description.required && errors.push('La description est obligatoire.')\n            !this.$v.programmeImmobilierModel.programmeImmobilier.description.minLength && errors.push('La description doit avoir plus de 20 caractères.')\n            return errors \n        },\n\n        localisationErrors(){\n            const errors = [];\n            if (!this.$v.programmeImmobilierModel.programmeImmobilier.ville.id.$dirty) return errors\n            !this.$v.programmeImmobilierModel.programmeImmobilier.ville.id.required && errors.push('La ville est obligatoire.')\n            return errors \n        },\n\n\n        codeErrors(){\n            const errors = [];\n            if (!this.$v.programmeImmobilierModel.programmeImmobilier.code.$dirty) return errors\n            !this.$v.programmeImmobilierModel.programmeImmobilier.code.maxLength && errors.push('Le code ne doit pas dépasser 20 caractères')\n            !this.$v.programmeImmobilierModel.programmeImmobilier.code.required && errors.push('Le Code est obligatoire.')\n            !this.$v.programmeImmobilierModel.programmeImmobilier.code.required && errors.push('Le Code est obligatoire.')\n            return errors \n        },\n\n\n        prixErrors(){\n            const errors = [];\n            if (!this.$v.programmeImmobilierModel.programmeImmobilier.designation.$dirty) return errors\n            !this.$v.programmeImmobilierModel.programmeImmobilier.designation.maxLength && errors.push('Name must be at most 10 characters long')\n            !this.$v.programmeImmobilierModel.programmeImmobilier.designation.required && errors.push('La Désignation est obligatoire.')\n            return errors \n        },\n\n\n        // GESTIONS DES CONTRAINTES DES CHAMPS D'ENTREES POUR LES MODES DE FINANCEMENT PALLIER COMPTANT SUR SITUATION\n        \n        pallierErrors(){\n            const errors = [];\n            if (!this.$v.pallierSurSituationModel.pallier.id.$dirty) return errors\n            !this.$v.pallierSurSituationModel.pallier.id.required && errors.push('Choisissez un pallier')\n            return errors  \n        },\n\n        tauxPallierErrors(){\n            const errors = [];\n            if (!this.$v.pallierSurSituationModel.taux.$dirty) return errors\n            !this.$v.pallierSurSituationModel.taux.required && errors.push('Le taux est Obligatoire')\n            return errors \n        }\n\n    },\n\n    mounted(){\n\n       this.obtenirListeVillesAPI()\n       this.modeModificationProgrammeImmobilier()\n       this.obtenirListeTypeFinancementAPI()\n       this.obtenirListeDesEfisAPI()\n       this.obtenirListeDesPeriodicitesAPI()\n       this.obtenirListDesPalliersAPI()\n\n    }\n        \n}\n</script>\n\n<style scoped>\n\n    .create_or_modify_title{\n        color: #3867d6;\n        font-weight: bold;\n    }\n\n    .section{\n        font-weight: bold;\n    }\n\n    .my-alert-success {\n        position: fixed;\n        top: 25px;\n        right:2%;\n        width: 30%;\n        display: none;\n    }\n\n    .my-alert-error {\n        position: fixed;\n        top: 25px;\n        right:2%;\n        width: 30%;\n        display: none;\n    }\n\n</style>"]}]}