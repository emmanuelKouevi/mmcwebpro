{"remainingRequest":"/home/kouevi/mmc_web_pro/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/kouevi/mmc_web_pro/src/components/espace_client/EspaceClient.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/kouevi/mmc_web_pro/src/components/espace_client/EspaceClient.vue","mtime":1667392689136},{"path":"/home/kouevi/mmc_web_pro/node_modules/cache-loader/dist/cjs.js","mtime":1663945505146},{"path":"/home/kouevi/mmc_web_pro/node_modules/babel-loader/lib/index.js","mtime":1663945505798},{"path":"/home/kouevi/mmc_web_pro/node_modules/cache-loader/dist/cjs.js","mtime":1663945505146},{"path":"/home/kouevi/mmc_web_pro/node_modules/vue-loader/lib/index.js","mtime":1663945506422}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnCmltcG9ydCB7IEFQSV9PQlRFTklSX0xJU1RFX0xPR0VNRU5UX1BBUl9QUk9NT1RFVVIgLCBBUElfT0JURU5JUl9JTUFHRV9DT05TVUxUQVRJT04gLCBBUElfT0JURU5JUl9MSVNURV9QUk9QUklFVEVTICwgQVBJX09CVEVOSVJfTElTVEVfT1BFUkFURVVSX0NSSVRFUkUgLCBSRUZfQ1JJVEVSRV9PUEVSQVRFVVJfQkVUV0VFTiAsUkVGX0NSSVRFUkVfT1BFUkFURVVSX0lOICwgQVBJX09CVEVOSVJfTElTVEVfVklMTEVTICwgQVBJX1JFRkVSRU5DRVNfUEFSX0ZBTUlMTEUvKlJFRl9DUklURVJFX09QRVJBVEVVUl9TVVBFUklFVVIqLyB9IGZyb20gJy4uL2dsb2JhbENvbmZpZy9nbG9iYWxDb25maWcnCmltcG9ydCB7IC8qQVBJX1JFQ0hFUkNIRVJfTE9HRU1FTlRfUEFSX01PVF9DTEUgLC8qUkVGX0NSSVRFUkVfT1BFUkFURVVSX0lORkVSSUVVUiAsKi8gLypSRUZfQ1JJVEVSRV9PUEVSQVRFVVJfSU5GRVJJRVVSX0VHQUxFICwgUkVGX0NSSVRFUkVfT1BFUkFURVVSX1NVUEVSSUVVUl9FR0FMRSAsIFJFRl9DUklURVJFX09QRVJBVEVVUl9FR0FMRSAsKi8gUkVGX0VMRU1FTlRfVFlQRVZBTEVVUl9USU1FICB9IGZyb20gJy4uL2dsb2JhbENvbmZpZy9nbG9iYWxDb25maWcnCmltcG9ydCB7IC8qUkVGX0VMRU1FTlRfVFlQRVZBTEVVUl9TVFJJTkcgLCovIFJFRl9FTEVNRU5UX1RZUEVWQUxFVVJfREFURSAsIFJFRl9FTEVNRU5UX1RZUEVWQUxFVVJfREFURVRJTUUgLCBSRUZfRUxFTUVOVF9UWVBFVkFMRVVSX1JFRkVSRU5DRSAsIFJFRl9FTEVNRU5UX1RZUEVWQUxFVVJfRkxPQVQgfSBmcm9tICcuLi9nbG9iYWxDb25maWcvZ2xvYmFsQ29uZmlnJwppbXBvcnQgeyBSRUZfRUxFTUVOVF9UWVBFVkFMRVVSX1ZJTExFICwgUkVGX0VMRU1FTlRfVFlQRVZBTEVVUl9ET1VCTEUgLCBSRUZfRUxFTUVOVF9UWVBFVkFMRVVSX0lOVEVHRVIgLCBSRUZfRUxFTUVOVF9UWVBFVkFMRVVSX0JPT0xFQU4gLCBBUElfUkVDSEVSQ0hFUl9QUk9EVUlUX0xPR0VNRU5UX1BBUl9DUklURVJFTElTVCB9IGZyb20gJy4uL2dsb2JhbENvbmZpZy9nbG9iYWxDb25maWcnCgogICAgZXhwb3J0IGRlZmF1bHQgewoKICAgICAgICBuYW1lOiJSZWNoZXJjaGVMb2dlbWVudCIsCgogICAgICAgIGRhdGEoKXsKCiAgICAgICAgICAgIHJldHVybnsKICAgICAgICAgICAgICAgIG1lbnU6IGZhbHNlLAogICAgICAgICAgICAgICAgbG9nZW1lbnRMaXN0IDogW10sCiAgICAgICAgICAgICAgICB0b3VzTGVzTG9nZW1lbnRzIDogW10sCiAgICAgICAgICAgICAgICBsb2dlbWVudHNBdmVjSW1hZ2UgOiBbXSwKICAgICAgICAgICAgICAgIHByb3ByaWV0ZVByb2R1aXRMb2dlbWVudExpc3QgOiBbXSwKICAgICAgICAgICAgICAgIG9wZXJhdGV1cnNDcml0ZXJlTGlzdCA6IFtdLAogICAgICAgICAgICAgICAgY3JpdGVyZVJlY2hlcmNoZVByb2R1aXRMb2dlbWVudExpc3QgOiBbXSwKICAgICAgICAgICAgICAgIHZpbGxlc0xpc3QgOiBbXSwKICAgICAgICAgICAgICAgIHJlZmVyZW5jZUxpc3QgOiBbXSwKICAgICAgICAgICAgICAgIG5icmVMaW1pdEludGVnZXIgOiA2LAogICAgICAgICAgICAgICAgbG93ZXJWYWx1ZSA6IDAgICAsCiAgICAgICAgICAgICAgICB1cHBlclZhbHVlIDogMCwKICAgICAgICAgICAgfQoKICAgICAgICB9LAoKICAgICAgICBtZXRob2RzOnsKCiAgICAgICAgICAgIGFzeW5jIGNoYXJnZXJDcml0ZXJlTG9nZW1lbnRMaXN0KCl7CgogICAgICAgICAgICAgICAgLy8gVE9ETyA6IENyZWVyIHVuZSBmb25jdGlvbiBwb3VyIGwnYWZmZWN0aW9uIGRlcyBvcMOpcmF0ZXVycwoKICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0UHJvcHJpZXRlUHJvZHVpdExvZ2VtZW50TGlzdCgpCiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmdldE9wZXJhdGV1ckNyaXRlcmVMaXN0KCkKCiAgICAgICAgICAgICAgICBpZih0aGlzLnByb3ByaWV0ZVByb2R1aXRMb2dlbWVudExpc3QgIT0gbnVsbCAmJiB0aGlzLnByb3ByaWV0ZVByb2R1aXRMb2dlbWVudExpc3QubGVuZ3RoID4gMCl7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMucHJvcHJpZXRlUHJvZHVpdExvZ2VtZW50TGlzdC5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjcml0ZXJlUmVjaGVyY2hlUHJvZHVpdExvZ2VtZW50ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQgOiBudWxsICwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2lnbmF0aW9uIDogbnVsbCAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA6IG51bGwgLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHJpZXRlUHJvZHVpdExvZ2VtZW50IDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkIDogbnVsbCAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzaWduYXRpb24gOiBudWxsICwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA6IG51bGwgLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVzdFVzdWVsbGVGaWx0cmUgOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVzdENob2l4TXVsdGlwbGVGaWx0cmUgOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFZhbHVlSW50ZWdlckZpbHRyZSA6IG51bGwgLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pblZhbHVlSW50ZWdlckZpbHRyZSA6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4VmFsdWVGbG9hdEZpbHRyZSA6IG51bGwgLCAvL1R5cGUgRmxvYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5WYWx1ZUZsb2F0RmlsdHJlIDpudWxsICwgLy9UeXBlIEZsb2F0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4VmFsdWVEb3VibGVGaWx0cmUgOiBudWxsICwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5WYWx1ZURvdWJsZUZpbHRyZSA6IG51bGwgLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFZhbHVlRGF0ZUZpbHRlciA6IG51bGwgLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pblZhbHVlRGF0ZUZpbHRlciA6IG51bGwgLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbWlsbGVTaVR5cGVSZWZlcmVuY2UgOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkIDogbnVsbCAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2lnbmF0aW9uIDogbnVsbCAsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlIDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZCA6IG51bGwgLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZSA6IG51bGwgLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNpZ25hdGlvbiA6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFtaWxsZVByb3ByaWV0ZVByb2R1aXRMb2dlbWVudCA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQgOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNpZ25hdGlvbiA6IG51bGwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbmU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQgOiBudWxsICwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzaWduYXRpb24gOiBudWxsICwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gOiBudWxsICwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudSA6IG51bGwgLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoIDogbnVsbCAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdCA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkIDogbnVsbCAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVEb2N1bWVudCA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkIDogbnVsbCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbiA6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVzdE9ibGlnYXRvaXJlIDogbnVsbCAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXN0RGFuc0xpc3RlIDogbnVsbCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRldXJDcml0ZXJlIDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkIDogbnVsbCAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZSA6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzaWduYXRpb24gOiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsZXVyQ3JpdGVyZSA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZCA6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzaWduYXRpb24gOiBudWxsICwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA6IG51bGwgLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGV1clRleHRlIDogW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBjcml0ZXJlUmVjaGVyY2hlUHJvZHVpdExvZ2VtZW50LnByb3ByaWV0ZVByb2R1aXRMb2dlbWVudCA9IHRoaXMucHJvcHJpZXRlUHJvZHVpdExvZ2VtZW50TGlzdFtpbmRleF0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjcml0ZXJlUmVjaGVyY2hlUHJvZHVpdExvZ2VtZW50LnByb3ByaWV0ZVByb2R1aXRMb2dlbWVudCAhPSBudWxsICYmIGNyaXRlcmVSZWNoZXJjaGVQcm9kdWl0TG9nZW1lbnQucHJvcHJpZXRlUHJvZHVpdExvZ2VtZW50LnR5cGUuaWQgPT0gUkVGX0VMRU1FTlRfVFlQRVZBTEVVUl9SRUZFUkVOQ0UpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMub3BlcmF0ZXVyc0NyaXRlcmVMaXN0Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wZXJhdGV1cnNDcml0ZXJlTGlzdFtpbmRleF0uaWQgPT0gUkVGX0NSSVRFUkVfT1BFUkFURVVSX0lOKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyaXRlcmVSZWNoZXJjaGVQcm9kdWl0TG9nZW1lbnQub3BlcmF0ZXVyQ3JpdGVyZSA9IHRoaXMub3BlcmF0ZXVyc0NyaXRlcmVMaXN0W2luZGV4XQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNyaXRlcmVSZWNoZXJjaGVQcm9kdWl0TG9nZW1lbnQucHJvcHJpZXRlUHJvZHVpdExvZ2VtZW50ICE9IG51bGwgJiYgY3JpdGVyZVJlY2hlcmNoZVByb2R1aXRMb2dlbWVudC5wcm9wcmlldGVQcm9kdWl0TG9nZW1lbnQudHlwZS5pZCA9PSBSRUZfRUxFTUVOVF9UWVBFVkFMRVVSX1ZJTExFKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLm9wZXJhdGV1cnNDcml0ZXJlTGlzdC5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vcGVyYXRldXJzQ3JpdGVyZUxpc3RbaW5kZXhdLmlkID09IFJFRl9DUklURVJFX09QRVJBVEVVUl9JTikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcml0ZXJlUmVjaGVyY2hlUHJvZHVpdExvZ2VtZW50Lm9wZXJhdGV1ckNyaXRlcmUgPSB0aGlzLm9wZXJhdGV1cnNDcml0ZXJlTGlzdFtpbmRleF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjcml0ZXJlUmVjaGVyY2hlUHJvZHVpdExvZ2VtZW50LnByb3ByaWV0ZVByb2R1aXRMb2dlbWVudCAhPSBudWxsICYmIGNyaXRlcmVSZWNoZXJjaGVQcm9kdWl0TG9nZW1lbnQucHJvcHJpZXRlUHJvZHVpdExvZ2VtZW50LnR5cGUuaWQgPT0gUkVGX0VMRU1FTlRfVFlQRVZBTEVVUl9GTE9BVCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5vcGVyYXRldXJzQ3JpdGVyZUxpc3QubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3BlcmF0ZXVyc0NyaXRlcmVMaXN0W2luZGV4XS5pZCA9PSBSRUZfQ1JJVEVSRV9PUEVSQVRFVVJfQkVUV0VFTikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcml0ZXJlUmVjaGVyY2hlUHJvZHVpdExvZ2VtZW50Lm9wZXJhdGV1ckNyaXRlcmUgPSB0aGlzLm9wZXJhdGV1cnNDcml0ZXJlTGlzdFtpbmRleF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjcml0ZXJlUmVjaGVyY2hlUHJvZHVpdExvZ2VtZW50LnByb3ByaWV0ZVByb2R1aXRMb2dlbWVudCAhPSBudWxsICYmIGNyaXRlcmVSZWNoZXJjaGVQcm9kdWl0TG9nZW1lbnQucHJvcHJpZXRlUHJvZHVpdExvZ2VtZW50LnR5cGUuaWQgPT0gUkVGX0VMRU1FTlRfVFlQRVZBTEVVUl9CT09MRUFOKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLm9wZXJhdGV1cnNDcml0ZXJlTGlzdC5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vcGVyYXRldXJzQ3JpdGVyZUxpc3RbaW5kZXhdLmlkID09IFJFRl9DUklURVJFX09QRVJBVEVVUl9JTikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcml0ZXJlUmVjaGVyY2hlUHJvZHVpdExvZ2VtZW50Lm9wZXJhdGV1ckNyaXRlcmUgPSB0aGlzLm9wZXJhdGV1cnNDcml0ZXJlTGlzdFtpbmRleF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjcml0ZXJlUmVjaGVyY2hlUHJvZHVpdExvZ2VtZW50LnByb3ByaWV0ZVByb2R1aXRMb2dlbWVudCAhPSBudWxsICYmIGNyaXRlcmVSZWNoZXJjaGVQcm9kdWl0TG9nZW1lbnQucHJvcHJpZXRlUHJvZHVpdExvZ2VtZW50LnR5cGUuaWQgPT0gUkVGX0VMRU1FTlRfVFlQRVZBTEVVUl9EQVRFVElNRSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5vcGVyYXRldXJzQ3JpdGVyZUxpc3QubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3BlcmF0ZXVyc0NyaXRlcmVMaXN0W2luZGV4XS5pZCA9PSBSRUZfQ1JJVEVSRV9PUEVSQVRFVVJfSU4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JpdGVyZVJlY2hlcmNoZVByb2R1aXRMb2dlbWVudC5vcGVyYXRldXJDcml0ZXJlID0gdGhpcy5vcGVyYXRldXJzQ3JpdGVyZUxpc3RbaW5kZXhdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3JpdGVyZVJlY2hlcmNoZVByb2R1aXRMb2dlbWVudC5wcm9wcmlldGVQcm9kdWl0TG9nZW1lbnQgIT0gbnVsbCAmJiBjcml0ZXJlUmVjaGVyY2hlUHJvZHVpdExvZ2VtZW50LnByb3ByaWV0ZVByb2R1aXRMb2dlbWVudC50eXBlLmlkID09IFJFRl9FTEVNRU5UX1RZUEVWQUxFVVJfREFURSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5vcGVyYXRldXJzQ3JpdGVyZUxpc3QubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3BlcmF0ZXVyc0NyaXRlcmVMaXN0W2luZGV4XS5pZCA9PSBSRUZfQ1JJVEVSRV9PUEVSQVRFVVJfSU4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JpdGVyZVJlY2hlcmNoZVByb2R1aXRMb2dlbWVudC5vcGVyYXRldXJDcml0ZXJlID0gdGhpcy5vcGVyYXRldXJzQ3JpdGVyZUxpc3RbaW5kZXhdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3JpdGVyZVJlY2hlcmNoZVByb2R1aXRMb2dlbWVudC5wcm9wcmlldGVQcm9kdWl0TG9nZW1lbnQgIT0gbnVsbCAmJiBjcml0ZXJlUmVjaGVyY2hlUHJvZHVpdExvZ2VtZW50LnByb3ByaWV0ZVByb2R1aXRMb2dlbWVudC50eXBlLmlkID09IFJFRl9FTEVNRU5UX1RZUEVWQUxFVVJfVElNRSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5vcGVyYXRldXJzQ3JpdGVyZUxpc3QubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3BlcmF0ZXVyc0NyaXRlcmVMaXN0W2luZGV4XS5pZCA9PSBSRUZfQ1JJVEVSRV9PUEVSQVRFVVJfSU4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JpdGVyZVJlY2hlcmNoZVByb2R1aXRMb2dlbWVudC5vcGVyYXRldXJDcml0ZXJlID0gdGhpcy5vcGVyYXRldXJzQ3JpdGVyZUxpc3RbaW5kZXhdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNyaXRlcmVSZWNoZXJjaGVQcm9kdWl0TG9nZW1lbnQucHJvcHJpZXRlUHJvZHVpdExvZ2VtZW50ICE9IG51bGwgJiYgY3JpdGVyZVJlY2hlcmNoZVByb2R1aXRMb2dlbWVudC5wcm9wcmlldGVQcm9kdWl0TG9nZW1lbnQudHlwZS5pZCA9PSBSRUZfRUxFTUVOVF9UWVBFVkFMRVVSX0lOVEVHRVIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMub3BlcmF0ZXVyc0NyaXRlcmVMaXN0Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wZXJhdGV1cnNDcml0ZXJlTGlzdFtpbmRleF0uaWQgPT0gUkVGX0NSSVRFUkVfT1BFUkFURVVSX0lOKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyaXRlcmVSZWNoZXJjaGVQcm9kdWl0TG9nZW1lbnQub3BlcmF0ZXVyQ3JpdGVyZSA9IHRoaXMub3BlcmF0ZXVyc0NyaXRlcmVMaXN0W2luZGV4XQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNyaXRlcmVSZWNoZXJjaGVQcm9kdWl0TG9nZW1lbnQucHJvcHJpZXRlUHJvZHVpdExvZ2VtZW50ICE9IG51bGwgJiYgY3JpdGVyZVJlY2hlcmNoZVByb2R1aXRMb2dlbWVudC5wcm9wcmlldGVQcm9kdWl0TG9nZW1lbnQudHlwZS5pZCA9PSBSRUZfRUxFTUVOVF9UWVBFVkFMRVVSX0RPVUJMRSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5vcGVyYXRldXJzQ3JpdGVyZUxpc3QubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3BlcmF0ZXVyc0NyaXRlcmVMaXN0W2luZGV4XS5pZCA9PSBSRUZfQ1JJVEVSRV9PUEVSQVRFVVJfQkVUV0VFTikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcml0ZXJlUmVjaGVyY2hlUHJvZHVpdExvZ2VtZW50Lm9wZXJhdGV1ckNyaXRlcmUgPSB0aGlzLm9wZXJhdGV1cnNDcml0ZXJlTGlzdFtpbmRleF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jcml0ZXJlUmVjaGVyY2hlUHJvZHVpdExvZ2VtZW50TGlzdC5wdXNoKGNyaXRlcmVSZWNoZXJjaGVQcm9kdWl0TG9nZW1lbnQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCgogICAgICAgICAgICAvL09CVEVOSVIgTEEgTElTVEUgREVTIFBST1BSSUVURVMgUFJPRFVJVFMgTE9HRU1FTlRTCgogICAgICAgICAgICBhc3luYyBnZXRQcm9wcmlldGVQcm9kdWl0TG9nZW1lbnRMaXN0KCl7CgogICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MuZ2V0KEFQSV9PQlRFTklSX0xJU1RFX1BST1BSSUVURVMpCiAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpICA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcmlldGVQcm9kdWl0TG9nZW1lbnRMaXN0ID0gcmVzcG9uc2UuZGF0YS5kYXRhCiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZXJyb3IpICA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LAoKCgoKICAgICAgICAgICAgLy8gT0JURU5JUiBMQSBMSVNURSBERVMgUkVGRVJFTkNFUyBQQVIgRkFNSUxMRVMgVFlQRVMgTE9HRU1FTlRTIAoKICAgICAgICAgICAgYXN5bmMgZ2V0UmVmZXJlbmNlTGlzdCgpewoKICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLmdldChBUElfUkVGRVJFTkNFU19QQVJfRkFNSUxMRSgnZmFtaWxsZVR5cGVMb2dlbWVudCcpKQogICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSAgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMucmVmZXJlbmNlTGlzdCA9IHJlc3BvbnNlLmRhdGEuZGF0YQogICAgICAgICAgICAgICAgfSkuY2F0Y2goKGVycm9yKSAgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSwKCgoKICAgICAgICAgICAgLy8gT0JURU5JUiBMQSBMSVNURSBERVMgVklMTEVTIAoKICAgICAgICAgICAgYXN5bmMgZ2V0VmlsbGVzTGlzdCgpewoKICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLmdldChBUElfT0JURU5JUl9MSVNURV9WSUxMRVMpCiAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpICA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWxsZXNMaXN0ID0gcmVzcG9uc2UuZGF0YS5kYXRhCiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZXJyb3IpICA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LAoKCgoKICAgICAgICAgICAgLy8gT0JURU5JUiBMQSBMSVNURSBERVMgT1BFUkFURVVSUyBDUklURVJFUwoKICAgICAgICAgICAgYXN5bmMgZ2V0T3BlcmF0ZXVyQ3JpdGVyZUxpc3QoKXsKCiAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5nZXQoQVBJX09CVEVOSVJfTElTVEVfT1BFUkFURVVSX0NSSVRFUkUpCiAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpICA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRldXJzQ3JpdGVyZUxpc3QgPSByZXNwb25zZS5kYXRhLmRhdGEKICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnJvcikgID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0sCgoKCiAgICAgICAgICAgIGFzeW5jIGNoYXJnZXJMb2dlbWVudENvbXBsZXRDbGllbnQoKXsKCiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm9idGVuaXJUb3VzTGVzTG9nZW1lbnRDcmVlcygpCgogICAgICAgICAgICAgICAgaWYgKHRoaXMudG91c0xlc0xvZ2VtZW50cy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMudG91c0xlc0xvZ2VtZW50cy5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbG9nZW1lbnRDb21wbGV0ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQgOiBudWxsICwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2lnbmF0aW9uIDogbnVsbCAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA6IG51bGwgLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXN0QWN0aXZlIDogbnVsbCAsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uTG9nZW1lbnRMaXN0IDogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWl0TG9nZW1lbnQgOiB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlQ29uc3VsdGF0aW9uOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzaWduYXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlRG9jdW1lbnQ6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogInJlZi5lbGVtZW50LnR5cGVWYWxldXIuaW1hZ2VDb25zdWx0YXRpb24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uIDogbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgbG9nZW1lbnRDb21wbGV0LmlkID0gdGhpcy50b3VzTGVzTG9nZW1lbnRzW2luZGV4XS5pZAogICAgICAgICAgICAgICAgICAgICAgICBsb2dlbWVudENvbXBsZXQuZGVzaWduYXRpb24gPSB0aGlzLnRvdXNMZXNMb2dlbWVudHNbaW5kZXhdLmRlc2lnbmF0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2VtZW50Q29tcGxldC5kZXNjcmlwdGlvbiA9IHRoaXMudG91c0xlc0xvZ2VtZW50c1tpbmRleF0uZGVzY3JpcHRpb24KICAgICAgICAgICAgICAgICAgICAgICAgbG9nZW1lbnRDb21wbGV0LmVzdEFjdGl2ZSA9IHRoaXMudG91c0xlc0xvZ2VtZW50c1tpbmRleF0uZXN0QWN0aXZlCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2VtZW50Q29tcGxldC5wcm9kdWl0TG9nZW1lbnQgPSB0aGlzLnRvdXNMZXNMb2dlbWVudHNbaW5kZXhdLnByb2R1aXRMb2dlbWVudAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2VtZW50c0F2ZWNJbWFnZS5wdXNoKGxvZ2VtZW50Q29tcGxldCkKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB9ICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICh0aGlzLmxvZ2VtZW50c0F2ZWNJbWFnZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgY291bnQgPSAwOyBjb3VudCA8IHRoaXMubG9nZW1lbnRzQXZlY0ltYWdlLmxlbmd0aDsgY291bnQrKykgewoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltYWdlID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNpZ25hdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZURvY3VtZW50OnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogInJlZi5lbGVtZW50LnR5cGVWYWxldXIuaW1hZ2VDb25zdWx0YXRpb24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbiA6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gT24gY2hhcmdlIGljaSBsJ2ltYWdlIGRlIGNvbnN1bHRhdGlvbgogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5nZXQoQVBJX09CVEVOSVJfSU1BR0VfQ09OU1VMVEFUSU9OKHRoaXMubG9nZW1lbnRzQXZlY0ltYWdlW2NvdW50XS5wcm9kdWl0TG9nZW1lbnQuaWQgLCJyZWYuZWxlbWVudC50eXBlVmFsZXVyLmltYWdlQ29uc3VsdGF0aW9uIikpCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIiIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dlbWVudHNBdmVjSW1hZ2VbY291bnRdLmltYWdlQ29uc3VsdGF0aW9uID0gaW1hZ2UKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0sCgoKICAgICAgICAgICAgLy9PQlRFTklSIExBIExJU1RFIERFUyBMT0dFTUVOVFMgUEFSIFBST01PVEVVUlMKICAgICAgICAgICAgYXN5bmMgb2J0ZW5pclRvdXNMZXNMb2dlbWVudENyZWVzKCkgewogICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MuZ2V0KEFQSV9PQlRFTklSX0xJU1RFX0xPR0VNRU5UX1BBUl9QUk9NT1RFVVIoJ3Byb21vdGV1cjAxJykpCiAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcmVzcG9uc2UuZGF0YS5kYXRhLmxlbmd0aDsgaW5kZXgrKykgeyAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b3VzTGVzTG9nZW1lbnRzLnB1c2gocmVzcG9uc2UuZGF0YS5kYXRhW2luZGV4XSkgICAgICAgCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LAoKCgogICAgICAgICAgICAvLyBSRUNIRVJDSEUgREUgTE9HRU1FTlRTIFBBUiBVTkUgTElTVEUgREUgQ1JJVEVSRVMgKENSSVRFUkVTIFNFTEVDVElPTk7DiVMgUEFSIExFIFBST1NQRUNUKQoKICAgICAgICAgICAgYXN5bmMgcmVjaGVyY2hlUGFyQ3JpdGVyZXNMaXN0KGNyaXRlcmVMaXN0KXsKCiAgICAgICAgICAgICAgICBmb3IgKGxldCBydW4gPSAwOyBydW4gPCBjcml0ZXJlTGlzdC5sZW5ndGg7IHJ1bisrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYoY3JpdGVyZUxpc3RbcnVuXS5wcm9wcmlldGVQcm9kdWl0TG9nZW1lbnQudHlwZS5pZCA9PSBSRUZfRUxFTUVOVF9UWVBFVkFMRVVSX0lOVEVHRVIpewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBydW5uZXIgPSAwOyBydW5uZXIgPCBjcml0ZXJlTGlzdFtydW5dLnZhbGV1ckNyaXRlcmUudmFsZXVyVGV4dGUubGVuZ3RoOyBydW5uZXIrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNyaXRlcmVMaXN0W3J1bl0udmFsZXVyQ3JpdGVyZS52YWxldXJUZXh0ZVtydW5uZXJdID09ICI1IGV0IHBsdXMiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JpdGVyZUxpc3RbcnVuXS52YWxldXJDcml0ZXJlLnZhbGV1clRleHRlID0gdGhpcy5tb2RpZnlWYWxldXJUZXh0ZShjcml0ZXJlTGlzdFtydW5dKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAgCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9ICAgCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucG9zdChBUElfUkVDSEVSQ0hFUl9QUk9EVUlUX0xPR0VNRU5UX1BBUl9DUklURVJFTElTVCAsIGNyaXRlcmVMaXN0KQogICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dlbWVudHNBdmVjSW1hZ2UgPSBbXQogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmRhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcmVzcG9uc2UuZGF0YS5kYXRhLmxlbmd0aDsgaW5kZXgrKykgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbWFnZSA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbG9nZW1lbnRDb21wbGV0ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1aXRMb2dlbWVudCA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2lnbmF0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3JhbW1lSW1tb2JpbGllcjogeyAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmFjdGVyaXN0aXF1ZVByb2R1aXRMb2dlbWVudExpc3Q6IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlc3RWYWxpZGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVzdEFjdGl2ZSA6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZUNvbnN1bHRhdGlvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzaWduYXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW51OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZURvY3VtZW50OnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAicmVmLmVsZW1lbnQudHlwZVZhbGV1ci5pbWFnZUNvbnN1bHRhdGlvbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbiA6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2VtZW50Q29tcGxldC5wcm9kdWl0TG9nZW1lbnQgPSByZXNwb25zZS5kYXRhLmRhdGFbaW5kZXhdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2VtZW50c0F2ZWNJbWFnZS5wdXNoKGxvZ2VtZW50Q29tcGxldCkgICAgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLypJY2kgLCBvbiByZWN1cGVyZSBsZXMgZG9jdW1lbnRzIGxpw6lzIMOgIHVuIHByb2R1aXQgbG9nZW1lbnQgdGVscyBxdWU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZSBkZSBjb25zdWx0YXRpb24gLCBsaXN0ZXMgZGVzIGltYWdlcyAsIGxpc3RlcyBkZXMgdmlkZW9zKi8KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF4aW9zLmdldChBUElfT0JURU5JUl9JTUFHRV9DT05TVUxUQVRJT04odGhpcy5sb2dlbWVudHNBdmVjSW1hZ2VbaW5kZXhdLnByb2R1aXRMb2dlbWVudC5pZCAsInJlZi5lbGVtZW50LnR5cGVWYWxldXIuaW1hZ2VDb25zdWx0YXRpb24iKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXN1bHRhdCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRhdC5kYXRhID09ICIiKSB7ICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gOyAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlID0gcmVzdWx0YXQuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2VtZW50c0F2ZWNJbWFnZVtpbmRleF0uaW1hZ2VDb25zdWx0YXRpb24gPSBpbWFnZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnJvcik9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgICAgICAgICAgICB9KQoKICAgICAgICAgICAgICAgIHRoaXMuY2xlYW5BbGxWYWxldXJUZXh0ZShjcml0ZXJlTGlzdCk7CgogICAgICAgICAgICB9LAoKCgogICAgICAgICAgICAvLyBBdmVjIGNldHRlIG1ldGhvZGUgLCBvbiB2aWRlcmEgbGEgbGlzdGUgZGVzIHZhbGV1clRleHRlIGRlIHRvdXMgbGVzIGNyaXRlcmVzIGRlIHJlY2hlcmNoZQoKICAgICAgICAgICAgY2xlYW5BbGxWYWxldXJUZXh0ZShjcml0ZXJlTGlzdCl7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgY3JpdGVyZUxpc3QubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICAgICAgICAgICAgY3JpdGVyZUxpc3RbaW5kZXhdLnZhbGV1ckNyaXRlcmUudmFsZXVyVGV4dGUgPSBbXQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKCgoKICAgICAgICAgICAgbW9kaWZ5VmFsZXVyVGV4dGUoY3JpdGVyZSl7CgogICAgICAgICAgICAgICAgdmFyIHZhbGV1ck1pbiA9IGNyaXRlcmUucHJvcHJpZXRlUHJvZHVpdExvZ2VtZW50Lm1pblZhbHVlSW50ZWdlckZpbHRyZQogICAgICAgICAgICAgICAgdmFyIHZhbGV1ck1heCA9IGNyaXRlcmUucHJvcHJpZXRlUHJvZHVpdExvZ2VtZW50Lm1heFZhbHVlSW50ZWdlckZpbHRyZQogICAgICAgICAgICAgICAgdmFyIHZhbGV1ckNvbXByaXNlTWluRXRNYXggPSBbXTsKICAgICAgICAgICAgICAgIHZhciBjaW5xUHJlbWllclZhbGV1cnMgPSBbXSA7CiAgICAgICAgICAgICAgICB2YXIgdmFsZXVyUGx1cyA9IFtdOwogICAgICAgICAgICAgICAgdmFyIGNvbXB0ZXVyID0gMQoKICAgICAgICAgICAgICAgIHdoaWxlKGNvbXB0ZXVyIDw9IDUgJiYgdmFsZXVyTWluIDw9IHZhbGV1ck1heCl7CiAgICAgICAgICAgICAgICAgICAgY2lucVByZW1pZXJWYWxldXJzLnB1c2godmFsZXVyTWluKyspCiAgICAgICAgICAgICAgICAgICAgY29tcHRldXIrKwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gdmFsZXVyTWluOyBpbmRleCA8PSB2YWxldXJNYXg7IGluZGV4KyspIHsKICAgICAgICAgICAgICAgICAgICB2YWxldXJDb21wcmlzZU1pbkV0TWF4LnB1c2goaW5kZXgpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGNpbnFQcmVtaWVyVmFsZXVycy5hdCgtMSk7IGkgPD0gdmFsZXVyTWF4OyBpKyspIHsKICAgICAgICAgICAgICAgICAgICB2YWxldXJQbHVzLnB1c2goaS50b1N0cmluZygpKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmb3IgKGxldCBjb3VudCA9IDA7IGNvdW50IDwgY3JpdGVyZS52YWxldXJDcml0ZXJlLnZhbGV1clRleHRlLmxlbmd0aDsgY291bnQrKykgewogICAgICAgICAgICAgICAgICAgIGlmIChjcml0ZXJlLnZhbGV1ckNyaXRlcmUudmFsZXVyVGV4dGVbY291bnRdID09ICI1IGV0IHBsdXMiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGNvdW50ZXIgPSAwOyBjb3VudGVyIDwgdmFsZXVyUGx1cy5sZW5ndGg7IGNvdW50ZXIrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNyaXRlcmUudmFsZXVyQ3JpdGVyZS52YWxldXJUZXh0ZVtjb3VudF0gPT0gdmFsZXVyUGx1c1tjb3VudGVyXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyaXRlcmUudmFsZXVyQ3JpdGVyZS52YWxldXJUZXh0ZS5zcGxpY2UoY291bnQgLCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAgCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShjcml0ZXJlLnZhbGV1ckNyaXRlcmUudmFsZXVyVGV4dGUsIFtjb3VudCwgdmFsZXVyUGx1cy5sZW5ndGhdLmNvbmNhdCh2YWxldXJQbHVzKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGNyaXRlcmUudmFsZXVyQ3JpdGVyZS52YWxldXJUZXh0ZQogICAgICAgICAgICB9LAoKCgoKICAgICAgICAgICAgcmV0dXJuTGlzdE9mSW50ZWdlcigpewogICAgICAgICAgICAgICAgdmFyIGNpbnFQcmVtaWVyVmFsZXVycyA9IFsxICwgMiAsIDMgLCA0ICwgIjUgZXQgcGx1cyJdCiAgICAgICAgICAgICAgICByZXR1cm4gY2lucVByZW1pZXJWYWxldXJzOwogICAgICAgICAgICB9LAoKCgogICAgICAgICAgICByZXR1cm5WYWx1ZU9mQ3JpdGVyZVR5cGVJbnRlZ2VyKG5icmUpewogICAgICAgICAgICAgICAgdmFyIHJ0biA7ICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIChuYnJlLnRvU3RyaW5nKCkgPT09ICI1IGV0IHBsdXMiKSB7CiAgICAgICAgICAgICAgICAgICAgcnRuID0gbmJyZS50b1N0cmluZygpICAgICAgICAKICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgICAgICBpZiAobmJyZS50b1N0cmluZygpICE9PSAiNSBldCBwbHVzIikgewogICAgICAgICAgICAgICAgICAgIHJ0biA9IG5icmUudG9TdHJpbmcoKSAgICAgCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gcnRuOyAKICAgICAgICAgICAgfSwKCgoKICAgICAgICAgICAgLy9DZXR0ZSBmb25jdGlvbiBjb252ZXJ0aXJhIG5vdHJlIHZhbGV1ciBlbiBib29sZWFuIHRydWUvZmFsc2Ugc2Vsb24gc2kgbCdvcHRpb24gZXN0IHNlbGVjdGlvbm7DqQoKICAgICAgICAgICAgZ2V0VmFsdWVUcnVlT3JGYWxzZShpdGVtKXsKICAgICAgICAgICAgICAgIHZhciByZXNwb25zZVRydWVPckZhbHNlCiAgICAgICAgICAgICAgICBpZihpdGVtID09ICIiIHx8IGl0ZW0gPT0gbnVsbCl7CiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VUcnVlT3JGYWxzZSA9ICJmYWxzZSIgICAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlVHJ1ZU9yRmFsc2UgPSAidHJ1ZSIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZVRydWVPckZhbHNlCiAgICAgICAgICAgIH0sCgoKCiAgICAgICAgICAgIC8vQ2V0dGUgbWV0aG9kZSBwZXJtZXR0cmEgZGUgcmV0b3VybmVyIGxhIHbDqXJpdGFibGUgdmFsZXVyIChWYWxldXJUZXh0ZSkgZGVzIGNhcmFjdGVyaXN0aXF1ZXMKCgogICAgICAgICAgICByZXR1cm5UcnVlVmFsdWUoY2FyYWN0ZXJpc3RpcXVlKXsKCiAgICAgICAgICAgICAgICB2YXIgdHJ1ZVZhbHVlOwoKICAgICAgICAgICAgICAgIGlmKGNhcmFjdGVyaXN0aXF1ZSA9PSBudWxsKSByZXR1cm4gbnVsbDsgCgogICAgICAgICAgICAgICAgaWYoY2FyYWN0ZXJpc3RpcXVlLnByb3ByaWV0ZVByb2R1aXRMb2dlbWVudC50eXBlLmlkID09IFJFRl9FTEVNRU5UX1RZUEVWQUxFVVJfUkVGRVJFTkNFKXsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5yZWZlcmVuY2VMaXN0Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZWZlcmVuY2VMaXN0W2luZGV4XS5pZCA9PSBjYXJhY3RlcmlzdGlxdWUudmFsZXVyVGV4dGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWVWYWx1ZSA9IHRoaXMucmVmZXJlbmNlTGlzdFtpbmRleF0uZGVzaWduYXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBlbHNlIGlmKGNhcmFjdGVyaXN0aXF1ZS5wcm9wcmlldGVQcm9kdWl0TG9nZW1lbnQudHlwZS5pZCA9PSBSRUZfRUxFTUVOVF9UWVBFVkFMRVVSX1ZJTExFKXsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy52aWxsZXNMaXN0Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52aWxsZXNMaXN0W2luZGV4XS5pZCA9PSBjYXJhY3RlcmlzdGlxdWUudmFsZXVyVGV4dGUpIHsgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZVZhbHVlID0gdGhpcy52aWxsZXNMaXN0W2luZGV4XS5kZXNpZ25hdGlvbgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGVsc2UgaWYoY2FyYWN0ZXJpc3RpcXVlLnByb3ByaWV0ZVByb2R1aXRMb2dlbWVudC50eXBlLmlkID09IFJFRl9FTEVNRU5UX1RZUEVWQUxFVVJfQk9PTEVBTil7CiAgICAgICAgICAgICAgICAgICAgaWYgKGNhcmFjdGVyaXN0aXF1ZS52YWxldXJUZXh0ZSA9PSAidHJ1ZSIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZVZhbHVlID0gIiIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0cnVlVmFsdWUgPSBjYXJhY3RlcmlzdGlxdWUudmFsZXVyVGV4dGUKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVZhbHVlOwoKICAgICAgICAgICAgfSwKCgoKICAgICAgICAgICAgLy8gRm9uY3Rpb24gcG91ciByw6ljdXBlcmVyIGxhIHByZW1pZXJlIHZhbGV1ciBkdSBzbGlkZXIgInByaXggZCdhY3F1aXNpdGlvbiIKCiAgICAgICAgICAgIGdldEZpcnN0VmFsdWUoY3JpdGVyZSl7CiAgICAgICAgICAgICAgICB2YXIgcnRuOyAKCiAgICAgICAgICAgICAgICBpZiAodGhpcy5sb3dlclZhbHVlID09IDApIHsKICAgICAgICAgICAgICAgICAgICBydG4gPSBjcml0ZXJlLnByb3ByaWV0ZVByb2R1aXRMb2dlbWVudC5taW5WYWx1ZURvdWJsZUZpbHRyZQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBydG4gPSB0aGlzLmxvd2VyVmFsdWUKICAgICAgICAgICAgICAgIH0gCgogICAgICAgICAgICAgICAgY3JpdGVyZS52YWxldXJDcml0ZXJlLnZhbGV1clRleHRlWzBdID0gcnRuCiAgICAgICAgICAgICAgICByZXR1cm4gcnRuCiAgICAgICAgICAgIH0sCgoKCiAgICAgICAgICAgIC8vIEZvbmN0aW9uIHBvdXIgcsOpY3VwZXJlciBsYSBzZWNvbmRlIHZhbGV1ciBkdSBzbGlkZXIgInByaXggZCdhY3F1aXNpdGlvbiIKCiAgICAgICAgICAgIGdldFNlY29uZFZhbHVlKGNyaXRlcmUpewogICAgICAgICAgICAgICAgdmFyIHJ0bjsgCiAgICAgICAgICAgICAgICBpZiAodGhpcy51cHBlclZhbHVlID09IDApIHsKICAgICAgICAgICAgICAgICAgICBydG4gPSBjcml0ZXJlLnByb3ByaWV0ZVByb2R1aXRMb2dlbWVudC5tYXhWYWx1ZURvdWJsZUZpbHRyZQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBydG4gPSB0aGlzLnVwcGVyVmFsdWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNyaXRlcmUudmFsZXVyQ3JpdGVyZS52YWxldXJUZXh0ZVsxXSA9IHJ0bjsKICAgICAgICAgICAgICAgIHJldHVybiBydG47CiAgICAgICAgICAgIH0sCgoKCiAgICAgICAgICAgIC8vUGFnZSBkZSBjb25zdWxhdGlvbiBkdSBsb2dlbWVudCBzw6lsZWN0aW9ubsOpCiAgICAgICAgICAgIGNvbnN1bHRlckxvZ2VtZW50RGV0YWlsKGxvZ2VtZW50KXsKICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZExvZ2VtZW50ID0gSlNPTi5zdHJpbmdpZnkobG9nZW1lbnQpCiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbG9nZW1lbnQnICwgcGFyc2VkTG9nZW1lbnQpCiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZSA6ICdMb2dlbWVudERldGFpbCcgLCBwYXJhbXM6IHsgaWQgOmxvZ2VtZW50LmlkICB9IH0pCiAgICAgICAgICAgIH0sCgoKCiAgICAgICAgICAgIC8vIFBhZ2UgZGUgc2ltdWxhdGlvbiBkZSBmaW5hbmNlbWVudCBpbW1vYmlsaWVyIGQndW4gbG9nZW1lbnQKICAgICAgICAgICAgc2ltdWxhdGlvbkZpbmFuY2VtZW50TG9nZW1lbnQoKXsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCB7IHBhdGg6Ii9DcmVlck1vZGlmaWVyU2ltdWxhdGlvbkZpbmFuY2VtZW50SW1tb2JpbGllciIgfSApCiAgICAgICAgICAgIH0sCgoKICAgICAgICB9LAoKCiAgICAKCiAgICAgICAgY29tcHV0ZWQgOiB7CgogICAgICAgICAgICAvKiBHcsOiY2Ugw6AgY2V0dGUgbcOpdGhvZGUsIG5vdXMgYWxsb25zIGfDqW7DqXJlciBsYSBsaXN0ZSBuZWNlc3NhaXJlIGEgbGEgcmVjaGVyY2hlIGQndW4gcHJvZHVpdCBsb2dlbWVudC4KICAgICAgICAgICAgQydlc3Qgw6AgZGlyZSAsIGVudm95ZXIgYXUgc2VydmV1ciBzZXVsZW1lbnQgbGVzIGNyaXRlcmVzIHF1aSBkb250IGRlcyAidmFsZXVyVGV4dGUiIHJlbnNlaWduw6lzKi8KCiAgICAgICAgICAgIGdldENyaXRlcmVMaXN0Rm9yU2VhcmNoKCl7CiAgICAgICAgICAgICAgICB2YXIgY3JpdGVyZUxpc3QgPSBbXTsKICAgICAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLmNyaXRlcmVSZWNoZXJjaGVQcm9kdWl0TG9nZW1lbnRMaXN0Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNyaXRlcmVSZWNoZXJjaGVQcm9kdWl0TG9nZW1lbnRMaXN0W2luZGV4XS52YWxldXJDcml0ZXJlLnZhbGV1clRleHRlICE9ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICYmIHRoaXMuY3JpdGVyZVJlY2hlcmNoZVByb2R1aXRMb2dlbWVudExpc3RbaW5kZXhdLnZhbGV1ckNyaXRlcmUudmFsZXVyVGV4dGUgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICBjcml0ZXJlTGlzdC5wdXNoKHRoaXMuY3JpdGVyZVJlY2hlcmNoZVByb2R1aXRMb2dlbWVudExpc3RbaW5kZXhdKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBjcml0ZXJlTGlzdCA7CiAgICAgICAgICAgIH0sCgoKICAgICAgICAgICAgZ2V0TGlzdE9mQ3JpdGVyZVJlY2hlcmNoZU9wdGlvbmFsKCl7CiAgICAgICAgICAgICAgICB2YXIgY3JpdGVyZVJlY2hlcmNoZU9wdGlvbmFsTGlzdCA9IFtdOwogICAgICAgICAgICAgICAgaWYgKHRoaXMuY3JpdGVyZVJlY2hlcmNoZVByb2R1aXRMb2dlbWVudExpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLmNyaXRlcmVSZWNoZXJjaGVQcm9kdWl0TG9nZW1lbnRMaXN0Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmNyaXRlcmVSZWNoZXJjaGVQcm9kdWl0TG9nZW1lbnRMaXN0W2luZGV4XS5wcm9wcmlldGVQcm9kdWl0TG9nZW1lbnQudHlwZS5pZCA9PSAncmVmLmVsZW1lbnQudHlwZVZhbGV1ci5ib29sZWFuJyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcml0ZXJlUmVjaGVyY2hlT3B0aW9uYWxMaXN0LnB1c2godGhpcy5jcml0ZXJlUmVjaGVyY2hlUHJvZHVpdExvZ2VtZW50TGlzdFtpbmRleF0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGNyaXRlcmVSZWNoZXJjaGVPcHRpb25hbExpc3Q7CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKCiAgICAgICAgbW91bnRlZCgpewogICAgICAgICAgICB0aGlzLmNoYXJnZXJMb2dlbWVudENvbXBsZXRDbGllbnQoKTsKICAgICAgICAgICAgdGhpcy5jaGFyZ2VyQ3JpdGVyZUxvZ2VtZW50TGlzdCgpOwogICAgICAgICAgICB0aGlzLmdldFZpbGxlc0xpc3QoKTsKICAgICAgICAgICAgdGhpcy5nZXRSZWZlcmVuY2VMaXN0KCk7CiAgICAgICAgfQogICAgICAgIAogICAgfQo="},{"version":3,"sources":["EspaceClient.vue"],"names":[],"mappings":";;AAmTA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;;;;;AAKA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;;AAGA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;AAIA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;;AAGA;;;;;AAKA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"EspaceClient.vue","sourceRoot":"src/components/espace_client","sourcesContent":["<template>\n\n    <v-app>\n\n        <v-app-bar app max-height=\"150px\" fixed>\n\n            <v-col cols=\"4\"><v-toolbar-title class=\"toolbar_title\">MA MAISON.COM</v-toolbar-title></v-col>\n\n            <v-col cols=\"6\" class=\"mt-7\">\n\n                <v-row>\n\n                    <v-col><v-text-field label=\"Rechercher un logement ...\" placeholder=\"Rechercher un logement ...\" solo></v-text-field></v-col>\n\n                    <v-col class=\"mt-2\"><v-btn color=\"success\"><v-icon>mdi-magnify</v-icon> Rechercher</v-btn></v-col>\n\n                </v-row>\n                \n            </v-col>  \n\n            <v-col>\n\n                <v-menu v-model=\"menu\" :close-on-content-click=\"false\" :nudge-width=\"200\" offset-y>\n\n                    <template v-slot:activator=\"{ on, attrs }\">\n\n                        <v-btn color=\"indigo\" text dark v-bind=\"attrs\" v-on=\"on\">Mon profil <v-icon>mdi-menu-down</v-icon></v-btn>\n\n                    </template>\n  \n                    <v-card>\n\n                        <v-list>\n\n                        <v-list-item>\n\n                            <v-list-item-avatar><img src=\"../../assets/kouevi_photo.jpg\"></v-list-item-avatar>\n            \n                            <v-list-item-content><v-list-item-title>Emmanuel Herve Kouevi</v-list-item-title>\n\n                            <v-list-item-subtitle>SICOGI</v-list-item-subtitle>\n\n                            </v-list-item-content>\n            \n                            <v-list-item-action>\n\n                            <v-btn icon><v-icon>mdi-account-edit</v-icon></v-btn>\n\n                            </v-list-item-action>\n\n                        </v-list-item>\n\n                        </v-list>\n\n            \n                        <v-divider></v-divider>\n\n            \n                        <v-list>\n                        \n                        <v-list-item>\n\n                            <v-list-item-icon><v-icon>mdi-logout</v-icon></v-list-item-icon>\n\n                            <v-btn text>Déconnexion</v-btn>\n\n                        </v-list-item>\n\n                        </v-list>\n\n                    </v-card>\n\n                </v-menu>\n\n            </v-col>\n\n        </v-app-bar>\n\n        <!-- Sizes your content based upon application components -->\n        <v-main>\n\n            <!-- Provides the application the proper gutter -->\n\n            <v-container fluid>\n\n                <v-row>\n\n                    <v-col><v-btn text color=\"info\"><v-icon>mdi-bell</v-icon> CREER UNE RÊQUETE</v-btn></v-col>\n\n                </v-row>\n\n                <v-row>\n\n                    <v-col cols=\"3\">\n                        \n                        <v-card elevation=\"3\"><span class=\"text-muted ml-3 font-weight-bold\">FILTRER PAR CRITERES</span> \n\n                            <v-divider></v-divider>\n\n                            <div class=\"critere_section\">\n\n                                <v-card-subtitle>Prix (Francs CFA)</v-card-subtitle>\n\n                                <v-container class=\"choice_critere\">\n\n                                    <v-row class=\"price\">\n\n                                        <v-col><v-text-field  type=\"number\" label=\"min\"></v-text-field></v-col>\n\n                                        <v-col><v-text-field type=\"number\" label=\"max\"></v-text-field></v-col>\n\n                                    </v-row>\n\n                                </v-container>\n\n                            </div>\n\n                            <v-divider></v-divider>\n\n                            <div class=\"critere_section\" v-for=\"critere in critereRechercheProduitLogementList\" :key=\"critere.id\">\n\n                                <div v-if=\"critere.proprieteProduitLogement != null\">\n\n                                    <div v-if=\"critere.proprieteProduitLogement.type.id == 'ref.element.typeValeur.reference'\">\n\n                                        <v-card-subtitle>{{ critere.proprieteProduitLogement.designation }}</v-card-subtitle>\n\n                                        <v-container class=\"choice_critere\">\n\n                                            <v-row v-for=\"(reference) in referenceList\" :key=\"reference.id\">\n\n                                                <v-col cols=\"12\" sm=\"2\" md=\"4\">\n\n                                                    <v-row>\n                                                    \n                                                        <v-col><v-checkbox class=\"checkboxes\" :value=\"reference.id\" :id=\"reference.id\" v-model=\"critere.valeurCritere.valeurTexte\" :label=\"reference.designation\"></v-checkbox></v-col>\n\n                                                    </v-row>\n        \n                                                </v-col>\n\n                                            </v-row>\n\n                                        </v-container>\n\n                                        <v-divider></v-divider>\n                                        \n                                    </div>\n\n                                    <div v-if=\"critere.proprieteProduitLogement.type.id == 'ref.element.typeValeur.ville'\">\n\n                                        <v-card-subtitle>{{ critere.proprieteProduitLogement.designation }}</v-card-subtitle>\n\n                                        <v-container class=\"choice_critere\">\n\n                                            <v-row v-for=\"(ville) in villesList\" :key=\"ville.id\">\n\n                                                <v-col>\n\n                                                    <v-row>\n                                                    \n                                                        <v-col><v-checkbox class=\"checkboxes\" :value=\"ville.id\" :id=\"ville.id\" v-model=\"critere.valeurCritere.valeurTexte\" :label=\"ville.designation\"></v-checkbox></v-col>\n\n                                                    </v-row>\n        \n                                                </v-col>\n\n                                            </v-row>\n\n                                        </v-container>\n\n                                        <v-divider></v-divider>\n\n                                    </div>\n\n\n                                    <div v-if=\"critere.proprieteProduitLogement.type.id == 'ref.element.typeValeur.double'\">\n                                        \n                                        <div v-if=\"critere.proprieteProduitLogement.designation == 'Superficie'\">\n\n                                            <v-card-subtitle>{{ critere.proprieteProduitLogement.designation }} (en m²)</v-card-subtitle>\n\n                                            <v-container class=\"choice_critere\">\n\n                                                <v-row>\n\n                                                    <v-col><v-text-field :value=\"getFirstValue(critere)\" type=\"number\" label=\"min\"></v-text-field></v-col>\n\n                                                    <v-col><v-text-field :value=\"getSecondValue(critere)\" type=\"number\" label=\"max\"></v-text-field></v-col>\n\n                                                </v-row>\n\n                                            </v-container>\n\n                                        </div>\n\n\n                                    </div>\n\n                                </div>\n\n                            </div>\n\n                        </v-card>\n                        \n                    </v-col>\n\n                    <v-col cols=\"9\">\n\n                        <v-container>\n\n                            <v-row>\n\n                                <v-col cols=\"6\" v-for=\"(logement) in logementsAvecImage\" :key=\"logement.id\">\n\n                                    <v-card>\n                                        \n                                        <v-img :src=\"logement.imageConsultation.contenu\" class=\"white--text align-end\" gradient=\"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)\" height=\"200px\">\n\n                                            <v-card-title v-text=\"logement.designation\"></v-card-title>\n\n                                        </v-img>\n\n                                        <v-card-subtitle>{{ logement.description }}</v-card-subtitle>\n\n                                        <v-container class=\"ml-1\">\n\n                                            <v-row>\n\n                                                <v-col><small>Prix du logement :</small></v-col>\n\n                                                <v-col><small>{{ logement.produitLogement.prix }} FCFA</small></v-col>\n\n                                            </v-row>\n\n                                        </v-container>\n\n\n                                        <v-divider></v-divider>\n\n\n                                        <v-container class=\"mt-1\">\n\n                                            <v-row>\n\n                                                <v-col v-for=\"caracteristiqueInList in logement.produitLogement.caracteristiqueProduitLogementList\" :key=\"caracteristiqueInList.id\">\n\n                                                    <div v-if=\"caracteristiqueInList.proprieteProduitLogement.estDansListe == true\">\n\n                                                        <v-chip active text-color=\"orange\"  v-if=\"caracteristiqueInList.proprieteProduitLogement.designation === 'Nombre de Pieces'\">\n\n                                                            <small>{{ returnTrueValue(caracteristiqueInList) }} Pièce(s)</small>\n\n                                                        </v-chip>\n\n                                                        <v-chip text-color=\"orange\" v-if=\"caracteristiqueInList.proprieteProduitLogement.designation === 'Type de Logement'\">\n\n                                                            <small>{{ returnTrueValue(caracteristiqueInList) }}</small>\n\n                                                        </v-chip>\n\n                                                    </div>\n\n                                                </v-col>\n\n                                            </v-row>\n                                            \n                                        </v-container>\n  \n                                        <v-card-actions>\n\n                                            <v-btn text color=\"orange\" @click=\"consulterLogementDetail(logement)\">VOIR PLUS</v-btn>\n\n                                            <v-spacer></v-spacer>\n  \n                                            <v-btn icon><v-icon>mdi-heart</v-icon></v-btn>\n\n                                        </v-card-actions>\n\n                                    </v-card>\n                                    \n                                </v-col>\n\n                            </v-row>\n\n                        </v-container>\n\n                    </v-col>\n\n                </v-row>\n\n                <router-view></router-view>\n\n            </v-container>\n\n        </v-main>\n\n        <v-footer app>\n            <!-- -->\n        </v-footer>\n    </v-app>\n    \n</template>\n\n\n<script>\n\nimport axios from 'axios'\nimport { API_OBTENIR_LISTE_LOGEMENT_PAR_PROMOTEUR , API_OBTENIR_IMAGE_CONSULTATION , API_OBTENIR_LISTE_PROPRIETES , API_OBTENIR_LISTE_OPERATEUR_CRITERE , REF_CRITERE_OPERATEUR_BETWEEN ,REF_CRITERE_OPERATEUR_IN , API_OBTENIR_LISTE_VILLES , API_REFERENCES_PAR_FAMILLE/*REF_CRITERE_OPERATEUR_SUPERIEUR*/ } from '../globalConfig/globalConfig'\nimport { /*API_RECHERCHER_LOGEMENT_PAR_MOT_CLE ,/*REF_CRITERE_OPERATEUR_INFERIEUR ,*/ /*REF_CRITERE_OPERATEUR_INFERIEUR_EGALE , REF_CRITERE_OPERATEUR_SUPERIEUR_EGALE , REF_CRITERE_OPERATEUR_EGALE ,*/ REF_ELEMENT_TYPEVALEUR_TIME  } from '../globalConfig/globalConfig'\nimport { /*REF_ELEMENT_TYPEVALEUR_STRING ,*/ REF_ELEMENT_TYPEVALEUR_DATE , REF_ELEMENT_TYPEVALEUR_DATETIME , REF_ELEMENT_TYPEVALEUR_REFERENCE , REF_ELEMENT_TYPEVALEUR_FLOAT } from '../globalConfig/globalConfig'\nimport { REF_ELEMENT_TYPEVALEUR_VILLE , REF_ELEMENT_TYPEVALEUR_DOUBLE , REF_ELEMENT_TYPEVALEUR_INTEGER , REF_ELEMENT_TYPEVALEUR_BOOLEAN , API_RECHERCHER_PRODUIT_LOGEMENT_PAR_CRITERELIST } from '../globalConfig/globalConfig'\n\n    export default {\n\n        name:\"RechercheLogement\",\n\n        data(){\n\n            return{\n                menu: false,\n                logementList : [],\n                tousLesLogements : [],\n                logementsAvecImage : [],\n                proprieteProduitLogementList : [],\n                operateursCritereList : [],\n                critereRechercheProduitLogementList : [],\n                villesList : [],\n                referenceList : [],\n                nbreLimitInteger : 6,\n                lowerValue : 0   ,\n                upperValue : 0,\n            }\n\n        },\n\n        methods:{\n\n            async chargerCritereLogementList(){\n\n                // TODO : Creer une fonction pour l'affection des opérateurs\n\n                await this.getProprieteProduitLogementList()\n                await this.getOperateurCritereList()\n\n                if(this.proprieteProduitLogementList != null && this.proprieteProduitLogementList.length > 0){\n                    for (let index = 0; index < this.proprieteProduitLogementList.length; index++) {\n                        \n                        var critereRechercheProduitLogement = {\n                            id : null ,\n                            designation : null ,\n                            description : null ,\n                            proprieteProduitLogement : {\n                                id : null ,\n                                designation : null ,\n                                description : null ,\n                                estUsuelleFiltre : null,\n                                estChoixMultipleFiltre : null,\n                                maxValueIntegerFiltre : null ,\n                                minValueIntegerFiltre : null,\n                                maxValueFloatFiltre : null , //Type Float\n                                minValueFloatFiltre :null , //Type Float\n                                maxValueDoubleFiltre : null ,\n                                minValueDoubleFiltre : null ,\n                                maxValueDateFilter : null ,\n                                minValueDateFilter : null ,\n                                familleSiTypeReference : {\n                                    id : null ,\n                                    designation : null , \n                                    description : null\n                                },\n\n                                type : {\n                                    id : null , \n                                    code : null ,\n                                    designation : null,\n                                },\n\n                                familleProprieteProduitLogement : {\n                                    id : null,\n                                    designation : null \n                                },\n\n                                icone: {\n                                    id : null ,\n                                    designation : null ,\n                                    description : null ,\n                                    contenu : null ,\n                                    path : null ,\n                                    format : {\n                                        id : null ,\n                                    },\n                                    typeDocument : {\n                                        id : null \n                                    },\n                                    version : null\n                                },\n                                estObligatoire : null ,\n                                estDansListe : null \n                            },\n                            operateurCritere : {\n                                id : null ,\n                                code : null,\n                                designation : null\n                            },\n                            valeurCritere : {\n                                id : null,\n                                designation : null ,\n                                description : null ,\n                                valeurTexte : []\n                            }\n                        }\n                        critereRechercheProduitLogement.proprieteProduitLogement = this.proprieteProduitLogementList[index]\n\n                        if (critereRechercheProduitLogement.proprieteProduitLogement != null && critereRechercheProduitLogement.proprieteProduitLogement.type.id == REF_ELEMENT_TYPEVALEUR_REFERENCE){\n                            for (let index = 0; index < this.operateursCritereList.length; index++) {\n                                if (this.operateursCritereList[index].id == REF_CRITERE_OPERATEUR_IN) {\n                                    critereRechercheProduitLogement.operateurCritere = this.operateursCritereList[index]\n                                }\n                            }\n                        }\n\n                        if (critereRechercheProduitLogement.proprieteProduitLogement != null && critereRechercheProduitLogement.proprieteProduitLogement.type.id == REF_ELEMENT_TYPEVALEUR_VILLE){\n                            for (let index = 0; index < this.operateursCritereList.length; index++) {\n                                if (this.operateursCritereList[index].id == REF_CRITERE_OPERATEUR_IN) {\n                                    critereRechercheProduitLogement.operateurCritere = this.operateursCritereList[index]\n                                }\n                            }\n                        }\n                        \n                        if (critereRechercheProduitLogement.proprieteProduitLogement != null && critereRechercheProduitLogement.proprieteProduitLogement.type.id == REF_ELEMENT_TYPEVALEUR_FLOAT){\n                            for (let index = 0; index < this.operateursCritereList.length; index++) {\n                                if (this.operateursCritereList[index].id == REF_CRITERE_OPERATEUR_BETWEEN) {\n                                    critereRechercheProduitLogement.operateurCritere = this.operateursCritereList[index]\n                                }\n                            }\n                        }\n\n                        if (critereRechercheProduitLogement.proprieteProduitLogement != null && critereRechercheProduitLogement.proprieteProduitLogement.type.id == REF_ELEMENT_TYPEVALEUR_BOOLEAN){\n                            for (let index = 0; index < this.operateursCritereList.length; index++) {\n                                if (this.operateursCritereList[index].id == REF_CRITERE_OPERATEUR_IN) {\n                                    critereRechercheProduitLogement.operateurCritere = this.operateursCritereList[index]\n                                }\n                            }\n                        }\n\n                        if (critereRechercheProduitLogement.proprieteProduitLogement != null && critereRechercheProduitLogement.proprieteProduitLogement.type.id == REF_ELEMENT_TYPEVALEUR_DATETIME){\n                            for (let index = 0; index < this.operateursCritereList.length; index++) {\n                                if (this.operateursCritereList[index].id == REF_CRITERE_OPERATEUR_IN) {\n                                    critereRechercheProduitLogement.operateurCritere = this.operateursCritereList[index]\n                                }\n                            }\n                        }\n\n                        if (critereRechercheProduitLogement.proprieteProduitLogement != null && critereRechercheProduitLogement.proprieteProduitLogement.type.id == REF_ELEMENT_TYPEVALEUR_DATE){\n                            for (let index = 0; index < this.operateursCritereList.length; index++) {\n                                if (this.operateursCritereList[index].id == REF_CRITERE_OPERATEUR_IN) {\n                                    critereRechercheProduitLogement.operateurCritere = this.operateursCritereList[index]\n                                }\n                            }\n                        }\n\n                        if (critereRechercheProduitLogement.proprieteProduitLogement != null && critereRechercheProduitLogement.proprieteProduitLogement.type.id == REF_ELEMENT_TYPEVALEUR_TIME){\n                            for (let index = 0; index < this.operateursCritereList.length; index++) {\n                                if (this.operateursCritereList[index].id == REF_CRITERE_OPERATEUR_IN) {\n                                    critereRechercheProduitLogement.operateurCritere = this.operateursCritereList[index]\n                                }\n                            }\n\n                        }\n\n                        if (critereRechercheProduitLogement.proprieteProduitLogement != null && critereRechercheProduitLogement.proprieteProduitLogement.type.id == REF_ELEMENT_TYPEVALEUR_INTEGER){\n                            for (let index = 0; index < this.operateursCritereList.length; index++) {\n                                if (this.operateursCritereList[index].id == REF_CRITERE_OPERATEUR_IN) {\n                                    critereRechercheProduitLogement.operateurCritere = this.operateursCritereList[index]\n                                }\n                            }\n                        }\n\n                        if (critereRechercheProduitLogement.proprieteProduitLogement != null && critereRechercheProduitLogement.proprieteProduitLogement.type.id == REF_ELEMENT_TYPEVALEUR_DOUBLE){\n                            for (let index = 0; index < this.operateursCritereList.length; index++) {\n                                if (this.operateursCritereList[index].id == REF_CRITERE_OPERATEUR_BETWEEN) {\n                                    critereRechercheProduitLogement.operateurCritere = this.operateursCritereList[index]\n                                }\n                            }\n                        }\n                        this.critereRechercheProduitLogementList.push(critereRechercheProduitLogement);\n                    }\n                }\n            },\n\n\n            //OBTENIR LA LISTE DES PROPRIETES PRODUITS LOGEMENTS\n\n            async getProprieteProduitLogementList(){\n\n                await axios.get(API_OBTENIR_LISTE_PROPRIETES)\n                .then((response)  => {\n                    this.proprieteProduitLogementList = response.data.data\n                }).catch((error)  => {\n                    console.log(error)\n                })\n            },\n\n\n\n\n            // OBTENIR LA LISTE DES REFERENCES PAR FAMILLES TYPES LOGEMENTS \n\n            async getReferenceList(){\n\n                await axios.get(API_REFERENCES_PAR_FAMILLE('familleTypeLogement'))\n                .then((response)  => {\n                    this.referenceList = response.data.data\n                }).catch((error)  => {\n                    console.log(error)\n                })\n            },\n\n\n\n            // OBTENIR LA LISTE DES VILLES \n\n            async getVillesList(){\n\n                await axios.get(API_OBTENIR_LISTE_VILLES)\n                .then((response)  => {\n                    this.villesList = response.data.data\n                }).catch((error)  => {\n                    console.log(error)\n                })\n            },\n\n\n\n\n            // OBTENIR LA LISTE DES OPERATEURS CRITERES\n\n            async getOperateurCritereList(){\n\n                await axios.get(API_OBTENIR_LISTE_OPERATEUR_CRITERE)\n                .then((response)  => {\n                    this.operateursCritereList = response.data.data\n                }).catch((error)  => {\n                    console.log(error)\n                })\n            },\n\n\n\n            async chargerLogementCompletClient(){\n\n                await this.obtenirTousLesLogementCrees()\n\n                if (this.tousLesLogements.length > 0) {\n                    for (let index = 0; index < this.tousLesLogements.length; index++) {\n                            \n                        var logementComplet = {\n                            id : null ,\n                            designation : null ,\n                            description : null ,\n                            estActive : null , \n                            optionLogementList : [],\n                            produitLogement : {},\n                            imageConsultation: {\n                                id: null,\n                                designation: null,\n                                description: null,\n                                contenu: null,\n                                format: {\n                                    id: null,\n                                    version: null,\n                                },\n                                typeDocument:{\n                                    id: \"ref.element.typeValeur.imageConsultation\"\n                                },\n                                version : null\n                            },\n                        }\n\n                        logementComplet.id = this.tousLesLogements[index].id\n                        logementComplet.designation = this.tousLesLogements[index].designation\n                        logementComplet.description = this.tousLesLogements[index].description\n                        logementComplet.estActive = this.tousLesLogements[index].estActive\n                        logementComplet.produitLogement = this.tousLesLogements[index].produitLogement\n                        this.logementsAvecImage.push(logementComplet)\n                    \n                    }    \n                                            \n                }\n\n                if (this.logementsAvecImage.length > 0) {\n                    for (let count = 0; count < this.logementsAvecImage.length; count++) {\n\n                        var image = {\n                            id: null,\n                            designation: null,\n                            description: null,\n                            contenu: null,\n                            format: {\n                                id: null,\n                                version: null,\n                            },\n                            typeDocument:{\n                                id: \"ref.element.typeValeur.imageConsultation\"\n                            },\n                            version : null\n                        }\n\n                        // On charge ici l'image de consultation\n                        await axios.get(API_OBTENIR_IMAGE_CONSULTATION(this.logementsAvecImage[count].produitLogement.id ,\"ref.element.typeValeur.imageConsultation\"))\n                        .then((response) => {\n                            if (response.data == \"\") {\n                                return ;\n                            }\n                            else {\n                                image = response.data.data;\n                            }\n                                this.logementsAvecImage[count].imageConsultation = image\n                        })\n                            \n                    }\n                }\n\n            },\n\n\n            //OBTENIR LA LISTE DES LOGEMENTS PAR PROMOTEURS\n            async obtenirTousLesLogementCrees() {\n                await axios.get(API_OBTENIR_LISTE_LOGEMENT_PAR_PROMOTEUR('promoteur01'))\n                .then((response) => {\n                    for (let index = 0; index < response.data.data.length; index++) {                   \n                        this.tousLesLogements.push(response.data.data[index])       \n                    }\n                }).catch((error) => {\n                    console.log(error)\n                })\n            },\n\n\n\n            // RECHERCHE DE LOGEMENTS PAR UNE LISTE DE CRITERES (CRITERES SELECTIONNÉS PAR LE PROSPECT)\n\n            async rechercheParCriteresList(critereList){\n\n                for (let run = 0; run < critereList.length; run++) {\n                    if(critereList[run].proprieteProduitLogement.type.id == REF_ELEMENT_TYPEVALEUR_INTEGER){\n                        for (let runner = 0; runner < critereList[run].valeurCritere.valeurTexte.length; runner++) {\n                            if (critereList[run].valeurCritere.valeurTexte[runner] == \"5 et plus\") {\n                                critereList[run].valeurCritere.valeurTexte = this.modifyValeurTexte(critereList[run])\n                            }  \n                        }\n                    }   \n                }\n\n                await axios.post(API_RECHERCHER_PRODUIT_LOGEMENT_PAR_CRITERELIST , critereList)\n                .then((response) => {\n                    this.logementsAvecImage = []\n                    if (response.data.data.length > 0) {\n                        for (let index = 0; index < response.data.data.length; index++) {\n\n                            var image ;\n                            var logementComplet = {\n                                produitLogement : {\n                                    id: null,\n                                    designation: null,\n                                    description: null,\n                                    code: null,\n                                    programmeImmobilier: {  \n                                        id: null,\n                                        version: null,\n                                    },\n                                    caracteristiqueProduitLogementList: [],\n                                    version: null,\n                                    estValide: null,\n                                    estActive : null,\n                                },\n                                imageConsultation: {\n                                    id: null,\n                                    designation: null,\n                                    description: null,\n                                    contenu: null,\n                                    format: {\n                                        id: null,\n                                        version: null,\n                                    },\n                                    typeDocument:{\n                                        id: \"ref.element.typeValeur.imageConsultation\"\n                                    },\n                                    version : null\n                                },\n                            }\n\n                            logementComplet.produitLogement = response.data.data[index]\n                            this.logementsAvecImage.push(logementComplet)    \n\n                            /*Ici , on recupere les documents liés à un produit logement tels que:\n                            image de consultation , listes des images , listes des videos*/\n\n                            \n                            axios.get(API_OBTENIR_IMAGE_CONSULTATION(this.logementsAvecImage[index].produitLogement.id ,\"ref.element.typeValeur.imageConsultation\"))\n                            .then((resultat) => {\n                                if (resultat.data == \"\") {    \n                                    return ;       \n                                }\n                                else {\n                                    image = resultat.data.data;\n                                }\n                                this.logementsAvecImage[index].imageConsultation = image\n                            })\n                        }\n                    }\n                }).catch((error)=> {\n                    console.log(error)\n                })\n\n                this.cleanAllValeurTexte(critereList);\n\n            },\n\n\n\n            // Avec cette methode , on videra la liste des valeurTexte de tous les criteres de recherche\n\n            cleanAllValeurTexte(critereList){\n                for (let index = 0; index < critereList.length; index++) {\n                    critereList[index].valeurCritere.valeurTexte = []\n                }\n            },\n\n\n\n\n            modifyValeurTexte(critere){\n\n                var valeurMin = critere.proprieteProduitLogement.minValueIntegerFiltre\n                var valeurMax = critere.proprieteProduitLogement.maxValueIntegerFiltre\n                var valeurCompriseMinEtMax = [];\n                var cinqPremierValeurs = [] ;\n                var valeurPlus = [];\n                var compteur = 1\n\n                while(compteur <= 5 && valeurMin <= valeurMax){\n                    cinqPremierValeurs.push(valeurMin++)\n                    compteur++\n                }\n\n                for (let index = valeurMin; index <= valeurMax; index++) {\n                    valeurCompriseMinEtMax.push(index)\n                }\n\n                for (var i = cinqPremierValeurs.at(-1); i <= valeurMax; i++) {\n                    valeurPlus.push(i.toString());\n                }\n\n                for (let count = 0; count < critere.valeurCritere.valeurTexte.length; count++) {\n                    if (critere.valeurCritere.valeurTexte[count] == \"5 et plus\") {\n                        for (let counter = 0; counter < valeurPlus.length; counter++) {\n                            if (critere.valeurCritere.valeurTexte[count] == valeurPlus[counter]) {\n                                critere.valeurCritere.valeurTexte.splice(count , 0)\n                            }  \n                        }\n                        Array.prototype.splice.apply(critere.valeurCritere.valeurTexte, [count, valeurPlus.length].concat(valeurPlus));\n                    }\n                }\n                return critere.valeurCritere.valeurTexte\n            },\n\n\n\n\n            returnListOfInteger(){\n                var cinqPremierValeurs = [1 , 2 , 3 , 4 , \"5 et plus\"]\n                return cinqPremierValeurs;\n            },\n\n\n\n            returnValueOfCritereTypeInteger(nbre){\n                var rtn ;                       \n                if (nbre.toString() === \"5 et plus\") {\n                    rtn = nbre.toString()        \n                } \n                if (nbre.toString() !== \"5 et plus\") {\n                    rtn = nbre.toString()     \n                }\n                return rtn; \n            },\n\n\n\n            //Cette fonction convertira notre valeur en boolean true/false selon si l'option est selectionné\n\n            getValueTrueOrFalse(item){\n                var responseTrueOrFalse\n                if(item == \"\" || item == null){\n                    responseTrueOrFalse = \"false\"   \n                }\n                else {\n                    responseTrueOrFalse = \"true\"\n                }\n                return responseTrueOrFalse\n            },\n\n\n\n            //Cette methode permettra de retourner la véritable valeur (ValeurTexte) des caracteristiques\n\n\n            returnTrueValue(caracteristique){\n\n                var trueValue;\n\n                if(caracteristique == null) return null; \n\n                if(caracteristique.proprieteProduitLogement.type.id == REF_ELEMENT_TYPEVALEUR_REFERENCE){\n                    for (let index = 0; index < this.referenceList.length; index++) {\n                        if (this.referenceList[index].id == caracteristique.valeurTexte) {\n                            trueValue = this.referenceList[index].designation\n                        }\n                    }\n                }\n\n                else if(caracteristique.proprieteProduitLogement.type.id == REF_ELEMENT_TYPEVALEUR_VILLE){\n                    for (let index = 0; index < this.villesList.length; index++) {\n                        if (this.villesList[index].id == caracteristique.valeurTexte) {     \n                            trueValue = this.villesList[index].designation\n                        }\n                    }\n                }\n\n                else if(caracteristique.proprieteProduitLogement.type.id == REF_ELEMENT_TYPEVALEUR_BOOLEAN){\n                    if (caracteristique.valeurTexte == \"true\") {\n                        trueValue = \"\"\n                    }\n                }\n                else {\n                    trueValue = caracteristique.valeurTexte\n                }\n\n                return trueValue;\n\n            },\n\n\n\n            // Fonction pour récuperer la premiere valeur du slider \"prix d'acquisition\"\n\n            getFirstValue(critere){\n                var rtn; \n\n                if (this.lowerValue == 0) {\n                    rtn = critere.proprieteProduitLogement.minValueDoubleFiltre\n                } else {\n                    rtn = this.lowerValue\n                } \n\n                critere.valeurCritere.valeurTexte[0] = rtn\n                return rtn\n            },\n\n\n\n            // Fonction pour récuperer la seconde valeur du slider \"prix d'acquisition\"\n\n            getSecondValue(critere){\n                var rtn; \n                if (this.upperValue == 0) {\n                    rtn = critere.proprieteProduitLogement.maxValueDoubleFiltre\n                } else {\n                    rtn = this.upperValue\n                }\n                critere.valeurCritere.valeurTexte[1] = rtn;\n                return rtn;\n            },\n\n\n\n            //Page de consulation du logement sélectionné\n            consulterLogementDetail(logement){\n                const parsedLogement = JSON.stringify(logement)\n                localStorage.setItem('logement' , parsedLogement)\n                this.$router.push({name : 'LogementDetail' , params: { id :logement.id  } })\n            },\n\n\n\n            // Page de simulation de financement immobilier d'un logement\n            simulationFinancementLogement(){\n                this.$router.push( { path:\"/CreerModifierSimulationFinancementImmobilier\" } )\n            },\n\n\n        },\n\n\n    \n\n        computed : {\n\n            /* Grâce à cette méthode, nous allons générer la liste necessaire a la recherche d'un produit logement.\n            C'est à dire , envoyer au serveur seulement les criteres qui dont des \"valeurTexte\" renseignés*/\n\n            getCritereListForSearch(){\n                var critereList = [];\n                for (let index = 0; index < this.critereRechercheProduitLogementList.length; index++) {\n                    if (this.critereRechercheProduitLogementList[index].valeurCritere.valeurTexte != \"\"\n                        && this.critereRechercheProduitLogementList[index].valeurCritere.valeurTexte != null) {\n                        critereList.push(this.critereRechercheProduitLogementList[index])\n                    }\n                }\n                return critereList ;\n            },\n\n\n            getListOfCritereRechercheOptional(){\n                var critereRechercheOptionalList = [];\n                if (this.critereRechercheProduitLogementList.length > 0) {\n                    for (let index = 0; index < this.critereRechercheProduitLogementList.length; index++) {\n                        if(this.critereRechercheProduitLogementList[index].proprieteProduitLogement.type.id == 'ref.element.typeValeur.boolean'){\n                            critereRechercheOptionalList.push(this.critereRechercheProduitLogementList[index])\n                        }\n                    }                   \n                }\n                return critereRechercheOptionalList;\n            }\n        },\n\n\n        mounted(){\n            this.chargerLogementCompletClient();\n            this.chargerCritereLogementList();\n            this.getVillesList();\n            this.getReferenceList();\n        }\n        \n    }\n</script>\n\n\n<style scoped>\n\n    .toolbar_title{\n        font-weight: bold;\n        color: #5f27cd;\n    }\n\n    .price{\n        margin-top: 0;\n    }\n\n    .checkboxes{\n        margin-top: -10px;\n    }\n\n</style>"]}]}